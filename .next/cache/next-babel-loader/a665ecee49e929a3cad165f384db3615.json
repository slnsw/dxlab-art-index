{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/luked/Documents/slnsw/dxlab-art-index/components/WebsiteApp/WebsiteApp.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport App from '../App';\nimport Header from '../Header';\nimport Footer from '../Footer';\nimport Progress from '../Progress/Progress';\nimport { initGA } from '../../lib/analytics'; // logPageView\n\nvar HEADER_MENU_ITEMS = [{\n  name: 'Home',\n  url: '/'\n}, {\n  name: 'About',\n  url: '/about'\n}, {\n  name: 'Experiments',\n  url: '/experiments'\n}, {\n  name: 'Blog',\n  url: '/blog'\n}, {\n  name: 'Grants',\n  url: '/grants'\n}, {\n  name: 'Code',\n  url: '/code'\n}, {\n  name: __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    className: \"primary-menu__divider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, \"/\"), ' ', __jsx(\"span\", {\n    className: \"slnsw-icon-ZoomOL2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  })),\n  url: '/search',\n  ariaLabel: 'search'\n}];\nvar SCROLLTOP_THRESHOLD = 100;\n\nvar WebsiteApp = /*#__PURE__*/function (_Component) {\n  _inherits(WebsiteApp, _Component);\n\n  var _super = _createSuper(WebsiteApp);\n\n  function WebsiteApp(props) {\n    var _this;\n\n    _classCallCheck(this, WebsiteApp);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnScroll\", function (event) {\n      if (event && event.srcElement && event.srcElement.scrollingElement) {\n        var scrollTop = event.srcElement.scrollingElement.scrollTop;\n\n        _this.setState({\n          isHeaderBackgroundActive: scrollTop > SCROLLTOP_THRESHOLD\n        });\n      }\n    });\n\n    _this.state = {\n      isHeaderBackgroundActive: false\n    };\n    return _this;\n  }\n\n  _createClass(WebsiteApp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('scroll', this.handleOnScroll);\n\n      if (!window.GA_INITIALIZED) {\n        initGA();\n        window.GA_INITIALIZED = true;\n      } // logPageView();\n\n    } // componentDidUpdate() {\n    //   // console.log('componentDidUpdate', this.props.isLoading);\n    //\n    //   Router.onRouteChangeStart = () => {\n    //     console.log('isLoading');\n    //     this.setState({\n    //       isLoading: true,\n    //     });\n    //   };\n    // }\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('scroll', this.handleOnScroll);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          title = _this$props.title,\n          metaDescription = _this$props.metaDescription,\n          metaImageUrl = _this$props.metaImageUrl,\n          metaImageWidth = _this$props.metaImageWidth,\n          metaImageHeight = _this$props.metaImageHeight,\n          pathname = _this$props.pathname,\n          isLoading = _this$props.isLoading,\n          children = _this$props.children;\n      return __jsx(App // pathname={pathname}\n      // isLoading={isLoading}\n      , {\n        title: title,\n        metaDescription: metaDescription,\n        metaImageUrl: metaImageUrl,\n        metaImageWidth: metaImageWidth,\n        metaImageHeight: metaImageHeight // headerMenuItems={HEADER_MENU_ITEMS}\n        ,\n        className: \"website-app\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 7\n        }\n      }, __jsx(Header, {\n        pathname: pathname,\n        menuItems: HEADER_MENU_ITEMS,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }\n      }), __jsx(\"div\", {\n        className: ['header-bg', this.state.isHeaderBackgroundActive ? 'is-active' : ''].join(' '),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }\n      }), __jsx(Progress, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 9\n        }\n      }), __jsx(\"div\", {\n        className: \"app__loading-screen \".concat(isLoading ? 'app__loading-screen--is-active' : ''),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"loader-wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }\n      }, __jsx(\"div\", {\n        className: \"loader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"ball\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 15\n        }\n      })))), __jsx(\"main\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 9\n        }\n      }, !isLoading && children), __jsx(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return WebsiteApp;\n}(Component);\n\n_defineProperty(WebsiteApp, \"propTypes\", {\n  title: PropTypes.string,\n  metaDescription: PropTypes.string,\n  metaImageUrl: PropTypes.string,\n  metaImageWidth: PropTypes.number,\n  metaImageHeight: PropTypes.number,\n  pathname: PropTypes.string,\n  isLoading: PropTypes.bool,\n  children: PropTypes.node\n});\n\n_defineProperty(WebsiteApp, \"defaultProps\", {\n  headerMenuItems: []\n});\n\nexport default WebsiteApp;","map":{"version":3,"sources":["/Users/luked/Documents/slnsw/dxlab-art-index/components/WebsiteApp/WebsiteApp.tsx"],"names":["Component","PropTypes","App","Header","Footer","Progress","initGA","HEADER_MENU_ITEMS","name","url","ariaLabel","SCROLLTOP_THRESHOLD","WebsiteApp","props","event","srcElement","scrollingElement","scrollTop","setState","isHeaderBackgroundActive","state","document","addEventListener","handleOnScroll","window","GA_INITIALIZED","removeEventListener","title","metaDescription","metaImageUrl","metaImageWidth","metaImageHeight","pathname","isLoading","children","join","string","number","bool","node","headerMenuItems"],"mappings":"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","sourcesContent":["import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport App from '../App';\nimport Header from '../Header';\nimport Footer from '../Footer';\nimport Progress from '../Progress/Progress';\n\nimport { initGA } from '../../lib/analytics'; // logPageView\n\ntype Props = {\n  title?: string;\n  metaDescription?: string;\n  metaImageUrl?: string;\n  metaImageWidth?: number;\n  metaImageHeight?: number;\n  pathname?: string;\n  isLoading?: boolean;\n  children?: React.ReactNode;\n};\n\ntype State = {\n  isHeaderBackgroundActive: boolean;\n};\n\ndeclare global {\n  interface Window {\n    GA_INITIALIZED: boolean;\n  }\n}\n\nconst HEADER_MENU_ITEMS = [\n  { name: 'Home', url: '/' },\n  { name: 'About', url: '/about' },\n  { name: 'Experiments', url: '/experiments' },\n  { name: 'Blog', url: '/blog' },\n  { name: 'Grants', url: '/grants' },\n  { name: 'Code', url: '/code' },\n  {\n    name: (\n      <span>\n        <span className=\"primary-menu__divider\">/</span>{' '}\n        <span className=\"slnsw-icon-ZoomOL2\" />\n      </span>\n    ),\n    url: '/search',\n    ariaLabel: 'search',\n  },\n];\n\nconst SCROLLTOP_THRESHOLD = 100;\n\nclass WebsiteApp extends Component<Props, State> {\n  static propTypes = {\n    title: PropTypes.string,\n    metaDescription: PropTypes.string,\n    metaImageUrl: PropTypes.string,\n    metaImageWidth: PropTypes.number,\n    metaImageHeight: PropTypes.number,\n    pathname: PropTypes.string,\n    isLoading: PropTypes.bool,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    headerMenuItems: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isHeaderBackgroundActive: false,\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('scroll', this.handleOnScroll);\n\n    if (!window.GA_INITIALIZED) {\n      initGA();\n      window.GA_INITIALIZED = true;\n    }\n\n    // logPageView();\n  }\n\n  // componentDidUpdate() {\n  //   // console.log('componentDidUpdate', this.props.isLoading);\n  //\n  //   Router.onRouteChangeStart = () => {\n  //     console.log('isLoading');\n  //     this.setState({\n  //       isLoading: true,\n  //     });\n  //   };\n  // }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.handleOnScroll);\n  }\n\n  handleOnScroll = (event) => {\n    if (event && event.srcElement && event.srcElement.scrollingElement) {\n      const { scrollTop } = event.srcElement.scrollingElement;\n\n      this.setState({\n        isHeaderBackgroundActive: scrollTop > SCROLLTOP_THRESHOLD,\n      });\n    }\n  };\n\n  render() {\n    const {\n      title,\n      metaDescription,\n      metaImageUrl,\n      metaImageWidth,\n      metaImageHeight,\n      pathname,\n      isLoading,\n      children,\n    } = this.props;\n\n    return (\n      <App\n        // pathname={pathname}\n        // isLoading={isLoading}\n        title={title}\n        metaDescription={metaDescription}\n        metaImageUrl={metaImageUrl}\n        metaImageWidth={metaImageWidth}\n        metaImageHeight={metaImageHeight}\n        // headerMenuItems={HEADER_MENU_ITEMS}\n        className=\"website-app\"\n      >\n        <Header pathname={pathname} menuItems={HEADER_MENU_ITEMS} />\n        {/*\n          .header-bg is needed for tricky position: sticky css\n          Includes line decoration for .primary-menu\n        */}\n        <div\n          className={[\n            'header-bg',\n            this.state.isHeaderBackgroundActive ? 'is-active' : '',\n          ].join(' ')}\n        />\n\n        <Progress />\n\n        <div\n          className={`app__loading-screen ${\n            isLoading ? 'app__loading-screen--is-active' : ''\n          }`}\n        >\n          <div className=\"loader-wrapper\">\n            <div className=\"loader\">\n              <div className=\"ball\" />\n            </div>\n          </div>\n        </div>\n\n        <main>{!isLoading && children}</main>\n\n        <Footer />\n      </App>\n    );\n  }\n}\n\nexport default WebsiteApp;\n"]},"metadata":{},"sourceType":"module"}