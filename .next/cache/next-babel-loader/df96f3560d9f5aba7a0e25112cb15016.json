{"ast":null,"code":"var _jsxFileName = \"/Users/luked/Documents/slnsw/dxlab-art-index/components/ArtIndexCharts/ArtIndexCharts.tsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from 'react';\nimport dynamic from 'next/dynamic';\nimport LoaderText from '../LoaderText';\nimport BubbleChart from '../BubbleChart';\nimport css from './ArtIndexCharts.module.scss';\nconst BarChart = dynamic(() => import('../BarChart'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('../BarChart')],\n    modules: ['../BarChart']\n  }\n});\n\nconst ArtIndexApp = (_ref) => {\n  let {\n    id = 'art-index-app',\n    className\n  } = _ref,\n      restProps = _objectWithoutProperties(_ref, [\"id\", \"className\"]);\n\n  const [loading, setLoading] = React.useState(true);\n  const [data, setData] = React.useState({\n    yearData: [],\n    formOfWork: [],\n    exhibitionName: [],\n    creator: [],\n    creator2: []\n  });\n  React.useEffect(() => {\n    fetch('/art-index/data/works-old.json').then(r => r.json()).then(d => {\n      setData(processData(d));\n      setLoading(false);\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []);\n  return __jsx(\"div\", _extends({\n    id: id,\n    className: [css.artIndexApp, className || ''].join(' ')\n  }, restProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }), __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, \"Australian Art Exhibiton Catalogue Index 1845-1900\"), loading && __jsx(LoaderText, {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, \"Artist names (first 150 sorted by name)\"), __jsx(BarChart, {\n    data: data.creator.slice(0, 150).map(d => {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 1500,\n    direction: 'horizontal',\n    showValues: true // rotateXAxis={true}\n    ,\n    margin: {\n      top: 20,\n      left: 200,\n      right: 10,\n      bottom: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, \"Artist names (firt 150 sorted by num of entries)\"), __jsx(BarChart, {\n    data: data.creator2.slice(0, 150).map(d => {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 1500,\n    direction: 'horizontal',\n    showValues: true // rotateXAxis={true}\n    ,\n    margin: {\n      top: 20,\n      left: 200,\n      right: 10,\n      bottom: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, \"Exhibtion names\"), __jsx(BarChart, {\n    data: data.exhibitionName.map(d => {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 1500,\n    direction: 'horizontal',\n    showValues: true // rotateXAxis={true}\n    ,\n    margin: {\n      top: 20,\n      left: 400,\n      right: 10,\n      bottom: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, \"Works exhibited by year\"), __jsx(BarChart, {\n    data: data.yearData.map(d => {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 300,\n    direction: 'vertical',\n    showValues: true,\n    rotateXAxis: true,\n    margin: {\n      top: 20,\n      left: 40,\n      right: 10,\n      bottom: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, \"Forms of work\"), __jsx(BubbleChart, {\n    data: data.formOfWork.slice(0, 30).map(d => {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 800 // className={css.popularWordsChart}\n    ,\n    renderBubble: d => {\n      // TODO: Consider `provider` API like React Select\n      return {\n        append: 'g',\n        transform: `translate(${d.x},${d.y})`,\n        duration: 1000,\n        children: [{\n          append: 'circle',\n          data: d.data,\n          r: {\n            enter: d.r,\n            exit: 0\n          },\n          fill: 'var(--colour-primary)',\n          duration: 1000 // onClick: (_, circleData) =>\n          //   Router.push(`/diary-files/search?q=${circleData.data.name}`),\n\n        }, {\n          append: 'text',\n          key: d.data.name,\n          fill: 'var(--colour-white)',\n          fontWeight: 600,\n          text: d.data.name,\n          opacity: {\n            enter: 1,\n            exit: 0\n          },\n          duration: 1000,\n          y: '-0.2em' // class: `${css.hoverView}`,\n          // onMouseOver:\n\n        }, {\n          append: 'text',\n          fill: 'var(--colour-white)',\n          text: d.data.value,\n          opacity: 0.8,\n          y: '0.9em'\n        }]\n      };\n    } // onBubbleClick={(_, d) => {\n    //   Router.push(`/diary-files/search?q=${d.data.name}`);\n    // }}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }), __jsx(BarChart, {\n    data: data.formOfWork.map(d => {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 3000,\n    direction: 'horizontal',\n    showValues: true // rotateXAxis={true}\n    ,\n    margin: {\n      top: 20,\n      left: 150,\n      right: 10,\n      bottom: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst arrayToCounts = a => {\n  if (!a) return null;\n  const counts = Object.create(null);\n  a.forEach(e => {\n    counts[e] = counts[e] ? counts[e] + 1 : 1;\n  });\n  const out = [];\n  Object.keys(counts).forEach(count => {\n    out.push({\n      item: count,\n      count: counts[count]\n    });\n  });\n  return out;\n};\n\nconst processData = d => {\n  // year Data\n  const years = d.map(e => {\n    return e.ExhibitionYear;\n  });\n  const yearData = arrayToCounts(years); // works data\n\n  const works = d.map(e => {\n    let form;\n\n    if (!e.FormOfWork) {\n      if (e.Medium.toLowerCase() === 'oil' || e.Medium.toLowerCase() === 'watercolour') {\n        form = 'painting';\n      } else if (e.Medium.toLowerCase() === 'crayon') {\n        form = 'drawing';\n      } else {\n        form = '';\n      }\n    } else {\n      form = e.FormOfWork;\n    }\n\n    return `${e.Medium}${e.Medium ? ' ' : ''}${form}`.toLowerCase();\n  });\n  const formOfWork = arrayToCounts(works); // exhib name data\n\n  const exhibNames = d.map(e => {\n    return e.ExhibitionName;\n  });\n  const exhibitionName = arrayToCounts(exhibNames).sort((a, b) => {\n    const s = b.item < a.item ? 1 : 0;\n    return b.item > a.item ? -1 : s;\n  });\n  const creators = d.map(e => {\n    return `${e.CreatorSurname}${e.CreatorForname ? ', ' : ''}${e.CreatorForname}`.toLowerCase();\n  });\n  const creator = arrayToCounts(creators).filter(c => {\n    return c.item.length > 0;\n  }).sort((a, b) => {\n    const s = b.item < a.item ? 1 : 0;\n    return b.item > a.item ? -1 : s;\n  });\n  const creators2 = d.map(e => {\n    return `${e.CreatorSurname}${e.CreatorForname ? ', ' : ''}${e.CreatorForname}`.toLowerCase();\n  });\n  const creator2 = arrayToCounts(creators2).filter(c => {\n    return c.item.length > 0;\n  }).sort((a, b) => {\n    return b.count - a.count;\n  });\n  return {\n    yearData,\n    formOfWork,\n    exhibitionName,\n    creator,\n    creator2\n  }; // console.log(creator.length);\n  // setData();\n};\n\nexport default ArtIndexApp;","map":{"version":3,"sources":["/Users/luked/Documents/slnsw/dxlab-art-index/components/ArtIndexCharts/ArtIndexCharts.tsx"],"names":["React","dynamic","LoaderText","BubbleChart","css","BarChart","ArtIndexApp","id","className","restProps","loading","setLoading","useState","data","setData","yearData","formOfWork","exhibitionName","creator","creator2","useEffect","fetch","then","r","json","d","processData","catch","error","console","log","artIndexApp","join","textAlign","slice","map","name","item","value","count","top","left","right","bottom","append","transform","x","y","duration","children","enter","exit","fill","key","fontWeight","text","opacity","arrayToCounts","a","counts","Object","create","forEach","e","out","keys","push","years","ExhibitionYear","works","form","FormOfWork","Medium","toLowerCase","exhibNames","ExhibitionName","sort","b","s","creators","CreatorSurname","CreatorForname","filter","c","length","creators2"],"mappings":"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","sourcesContent":["import React from 'react';\nimport dynamic from 'next/dynamic';\n\nimport LoaderText from '../LoaderText';\nimport BubbleChart from '../BubbleChart';\n\nimport css from './ArtIndexCharts.module.scss';\n\nconst BarChart = dynamic(() => import('../BarChart'));\n\ntype Props = {\n  id?: string;\n  className?: string;\n};\n\nconst ArtIndexApp: React.FC<Props> = ({\n  id = 'art-index-app',\n  className,\n  ...restProps\n}) => {\n  const [loading, setLoading] = React.useState(true);\n  const [data, setData] = React.useState({\n    yearData: [],\n    formOfWork: [],\n    exhibitionName: [],\n    creator: [],\n    creator2: [],\n  });\n\n  React.useEffect(() => {\n    fetch('/art-index/data/works-old.json')\n      .then((r) => r.json())\n      .then((d) => {\n        setData(processData(d));\n        setLoading(false);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  return (\n    <div\n      id={id}\n      className={[css.artIndexApp, className || ''].join(' ')}\n      {...restProps}\n    >\n      <h1>Australian Art Exhibiton Catalogue Index 1845-1900</h1>\n      {loading && (\n        <LoaderText\n          style={{\n            textAlign: 'center',\n          }}\n        />\n      )}\n\n      <p>Artist names (first 150 sorted by name)</p>\n      <BarChart\n        data={data.creator.slice(0, 150).map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={1500}\n        direction={'horizontal'}\n        showValues={true}\n        // rotateXAxis={true}\n        margin={{ top: 20, left: 200, right: 10, bottom: 80 }}\n      />\n\n      <p>Artist names (firt 150 sorted by num of entries)</p>\n      <BarChart\n        data={data.creator2.slice(0, 150).map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={1500}\n        direction={'horizontal'}\n        showValues={true}\n        // rotateXAxis={true}\n        margin={{ top: 20, left: 200, right: 10, bottom: 80 }}\n      />\n\n      <p>Exhibtion names</p>\n      <BarChart\n        data={data.exhibitionName.map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={1500}\n        direction={'horizontal'}\n        showValues={true}\n        // rotateXAxis={true}\n        margin={{ top: 20, left: 400, right: 10, bottom: 80 }}\n      />\n\n      <p>Works exhibited by year</p>\n      <BarChart\n        data={data.yearData.map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={300}\n        direction={'vertical'}\n        showValues={true}\n        rotateXAxis={true}\n        margin={{ top: 20, left: 40, right: 10, bottom: 80 }}\n      />\n\n      <p>Forms of work</p>\n\n      <BubbleChart\n        data={data.formOfWork.slice(0, 30).map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={800}\n        // className={css.popularWordsChart}\n        renderBubble={(d) => {\n          // TODO: Consider `provider` API like React Select\n          return {\n            append: 'g',\n            transform: `translate(${d.x},${d.y})`,\n            duration: 1000,\n            children: [\n              {\n                append: 'circle',\n                data: d.data,\n                r: { enter: d.r, exit: 0 },\n                fill: 'var(--colour-primary)',\n                duration: 1000,\n                // onClick: (_, circleData) =>\n                //   Router.push(`/diary-files/search?q=${circleData.data.name}`),\n              },\n              {\n                append: 'text',\n                key: d.data.name,\n                fill: 'var(--colour-white)',\n                fontWeight: 600,\n                text: d.data.name,\n                opacity: { enter: 1, exit: 0 },\n                duration: 1000,\n                y: '-0.2em',\n                // class: `${css.hoverView}`,\n                // onMouseOver:\n              },\n              {\n                append: 'text',\n                fill: 'var(--colour-white)',\n                text: d.data.value,\n                opacity: 0.8,\n                y: '0.9em',\n              },\n            ],\n          };\n        }}\n        // onBubbleClick={(_, d) => {\n        //   Router.push(`/diary-files/search?q=${d.data.name}`);\n        // }}\n      />\n\n      <BarChart\n        data={data.formOfWork.map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={3000}\n        direction={'horizontal'}\n        showValues={true}\n        // rotateXAxis={true}\n        margin={{ top: 20, left: 150, right: 10, bottom: 80 }}\n      />\n    </div>\n  );\n};\n\nconst arrayToCounts = (a) => {\n  if (!a) return null;\n  const counts = Object.create(null);\n  a.forEach((e) => {\n    counts[e] = counts[e] ? counts[e] + 1 : 1;\n  });\n  const out = [];\n  Object.keys(counts).forEach((count) => {\n    out.push({ item: count, count: counts[count] });\n  });\n  return out;\n};\n\nconst processData = (d) => {\n  // year Data\n  const years = d.map((e) => {\n    return e.ExhibitionYear;\n  });\n  const yearData = arrayToCounts(years);\n\n  // works data\n  const works = d.map((e) => {\n    let form;\n    if (!e.FormOfWork) {\n      if (\n        e.Medium.toLowerCase() === 'oil' ||\n        e.Medium.toLowerCase() === 'watercolour'\n      ) {\n        form = 'painting';\n      } else if (e.Medium.toLowerCase() === 'crayon') {\n        form = 'drawing';\n      } else {\n        form = '';\n      }\n    } else {\n      form = e.FormOfWork;\n    }\n    return `${e.Medium}${e.Medium ? ' ' : ''}${form}`.toLowerCase();\n  });\n  const formOfWork = arrayToCounts(works);\n  // exhib name data\n  const exhibNames = d.map((e) => {\n    return e.ExhibitionName;\n  });\n  const exhibitionName = arrayToCounts(exhibNames).sort((a, b) => {\n    const s = b.item < a.item ? 1 : 0;\n    return b.item > a.item ? -1 : s;\n  });\n\n  const creators = d.map((e) => {\n    return `${e.CreatorSurname}${e.CreatorForname ? ', ' : ''}${\n      e.CreatorForname\n    }`.toLowerCase();\n  });\n  const creator = arrayToCounts(creators)\n    .filter((c) => {\n      return c.item.length > 0;\n    })\n    .sort((a, b) => {\n      const s = b.item < a.item ? 1 : 0;\n      return b.item > a.item ? -1 : s;\n    });\n\n  const creators2 = d.map((e) => {\n    return `${e.CreatorSurname}${e.CreatorForname ? ', ' : ''}${\n      e.CreatorForname\n    }`.toLowerCase();\n  });\n  const creator2 = arrayToCounts(creators2)\n    .filter((c) => {\n      return c.item.length > 0;\n    })\n    .sort((a, b) => {\n      return b.count - a.count;\n    });\n\n  return { yearData, formOfWork, exhibitionName, creator, creator2 };\n\n  // console.log(creator.length);\n  // setData();\n};\n\nexport default ArtIndexApp;\n"]},"metadata":{},"sourceType":"module"}