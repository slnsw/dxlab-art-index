{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/luked/Documents/slnsw/dxlab-art-index/components/ArtIndexSearch/ArtIndexSearch.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport Router, { useRouter } from 'next/router';\nimport BarChart from '../BarChart';\nimport ArtIndexFormatBubbleChart from '../ArtIndexFormatBubbleChart';\nimport SearchTextInputV2 from '../SearchTextInput/SearchTextInputV2';\nimport ArtIndexSearchResult from '../ArtIndexSearchResult';\nimport LoaderText from '../LoaderText';\nimport SearchSelectedFacets from '../SearchSelectedFacets';\nimport ArtIndexCTAButton from '../ArtIndexCTAButton';\nimport ArtIndexArtistThumbnail from '../ArtIndexArtistThumbnail';\nimport Paginate from '../Paginate';\nimport Sidebar from '../Sidebar';\nimport Link from '../Link';\nimport TextButton from '../TextButton';\nimport createSearchQuery from '../../lib/create-search-query';\nimport { useAsyncReference } from '../../lib/hooks/use-async-reference';\nimport axios from '../../lib/axios';\nimport css from './ArtIndexSearch.module.scss';\nimport Icon from '../Icon';\nvar searchQuery = createSearchQuery({\n  baseUrl: '/art-index/search/'\n});\nvar searchApiQuery = createSearchQuery({\n  baseUrl: '/api/art-index/works'\n});\n\nvar ArtIndexSearchPage = function ArtIndexSearchPage() {\n  _s();\n\n  var _unpaddedYearData$, _unpaddedYearData;\n\n  var router = useRouter();\n  var query = router.query;\n  var queryRef = useAsyncReference(query, true);\n  var search = query.search;\n  var offset = parseInt(query.offset, 10);\n\n  var _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      value = _React$useState2[0],\n      setValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      resultsData = _React$useState4[0],\n      setResultsData = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      isLoading = _React$useState6[0],\n      setIsLoading = _React$useState6[1];\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      isOpen = _React$useState8[0],\n      setIsOpen = _React$useState8[1]; // Selected Facets\n\n\n  var selectedFormats = React.useMemo(function () {\n    var _query$formats;\n\n    return ((_query$formats = query.formats) === null || _query$formats === void 0 ? void 0 : _query$formats.split(',')) || [];\n  }, [query.formats]);\n  var selectedArtistIds = React.useMemo(function () {\n    var _query$artistIds;\n\n    return ((_query$artistIds = query.artistIds) === null || _query$artistIds === void 0 ? void 0 : _query$artistIds.split(',')) || [];\n  }, [query.artistIds]);\n  var selectedGenders = React.useMemo(function () {\n    var _query$genders;\n\n    return ((_query$genders = query.genders) === null || _query$genders === void 0 ? void 0 : _query$genders.split(',')) || [];\n  }, [query.genders]);\n  var selectedExhibitionIds = React.useMemo(function () {\n    var _query$exhibitionIds;\n\n    return ((_query$exhibitionIds = query.exhibitionIds) === null || _query$exhibitionIds === void 0 ? void 0 : _query$exhibitionIds.split(',')) || [];\n  }, [query.exhibitionIds]); // Results\n\n  var results = (resultsData === null || resultsData === void 0 ? void 0 : resultsData.works) || []; // Facets\n\n  var formatData = (resultsData === null || resultsData === void 0 ? void 0 : resultsData.facets.formats.map(function (f) {\n    return {\n      item: f.value,\n      count: f.total\n    };\n  })) || [];\n  var artistFacets = (resultsData === null || resultsData === void 0 ? void 0 : resultsData.facets.artists.map(function (a) {\n    return {\n      id: a.id,\n      name: \"\".concat(a.value.firstName, \" \").concat(a.value.lastName),\n      thumbnailFile: a.value.thumbnailFile,\n      gender: a.value.gender,\n      value: a.total\n    };\n  })) || [];\n  var genderFacets = (resultsData === null || resultsData === void 0 ? void 0 : resultsData.facets.genders.map(function (g) {\n    return {\n      id: g.type,\n      name: g.value,\n      value: g.total\n    };\n  })) || [];\n  var exhibitionData = (resultsData === null || resultsData === void 0 ? void 0 : resultsData.facets.exhibitions.map(function (e) {\n    return {\n      id: e.id,\n      name: e.value,\n      value: e.total\n    };\n  })) || [];\n  var unpaddedYearData = (resultsData === null || resultsData === void 0 ? void 0 : resultsData.facets.years.map(function (e) {\n    return {\n      name: e.id,\n      value: e.total\n    };\n  }).sort(function (a, b) {\n    return parseInt(a.name, 10) - parseInt(b.name, 10);\n  })) || []; // now pad it out and add any years that have no data - we want all years shown.\n\n  var yearData = [];\n  var minYear = (_unpaddedYearData$ = unpaddedYearData[0]) === null || _unpaddedYearData$ === void 0 ? void 0 : _unpaddedYearData$.name;\n  var maxYear = (_unpaddedYearData = unpaddedYearData[unpaddedYearData.length - 1]) === null || _unpaddedYearData === void 0 ? void 0 : _unpaddedYearData.name;\n\n  var _loop = function _loop(y) {\n    var _temp$;\n\n    var temp = unpaddedYearData.filter(function (i) {\n      return i.name === y.toString();\n    });\n    var val = ((_temp$ = temp[0]) === null || _temp$ === void 0 ? void 0 : _temp$.value) || 0;\n    yearData.push({\n      name: y.toString(),\n      value: val\n    });\n  };\n\n  for (var y = minYear; y <= maxYear; y++) {\n    _loop(y);\n  } // Selected Facets\n\n\n  var selectedFacets = [].concat(_toConsumableArray(selectedFormats.map(function (format) {\n    return {\n      name: format,\n      value: format,\n      url: searchQuery.stringifyAction(query, {\n        type: 'remove',\n        key: 'formats',\n        value: format\n      })\n    };\n  })), _toConsumableArray(selectedArtistIds.filter(function (artistId) {\n    var artist = artistFacets.find(function (a) {\n      return a.id === artistId;\n    });\n    return Boolean(artist);\n  }).map(function (artistId) {\n    var artist = artistFacets.find(function (a) {\n      return a.id === artistId;\n    });\n    return {\n      name: artist.name,\n      value: artistId,\n      url: searchQuery.stringifyAction(query, {\n        type: 'remove',\n        key: 'artistIds',\n        value: artistId\n      })\n    };\n  })), _toConsumableArray(selectedGenders.map(function (gender) {\n    return {\n      name: gender === 'unknown' ? 'Unknown gender' : gender,\n      value: gender,\n      url: searchQuery.stringifyAction(query, {\n        type: 'remove',\n        key: 'genders',\n        value: gender\n      })\n    };\n  })), _toConsumableArray(selectedExhibitionIds.filter(function (exhibitionId) {\n    var exhibition = exhibitionData.find(function (a) {\n      return a.id === exhibitionId;\n    });\n    return Boolean(exhibition);\n  }).map(function (exhibitionId) {\n    var exhibition = exhibitionData.find(function (a) {\n      return a.id === exhibitionId;\n    });\n    return {\n      name: exhibition.name,\n      value: exhibitionId,\n      url: searchQuery.stringifyAction(query, {\n        type: 'remove',\n        key: 'exhibitionIds',\n        value: exhibitionId\n      })\n    };\n  }))); // Pagination\n\n  var countPerPage = 20;\n  var pageCount = resultsData ? Math.ceil(resultsData.worksTotal / countPerPage) : null;\n  var initialPage = Math.floor(offset / countPerPage);\n  React.useEffect(function () {\n    var url = searchApiQuery.stringify({\n      search: search,\n      formats: selectedFormats === null || selectedFormats === void 0 ? void 0 : selectedFormats.join(','),\n      artistIds: selectedArtistIds === null || selectedArtistIds === void 0 ? void 0 : selectedArtistIds.join(','),\n      genders: selectedGenders === null || selectedGenders === void 0 ? void 0 : selectedGenders.join(','),\n      exhibitionIds: selectedExhibitionIds === null || selectedExhibitionIds === void 0 ? void 0 : selectedExhibitionIds.join(','),\n      offset: offset === 0 ? null : offset.toString()\n    });\n    setIsLoading(true);\n    axios.get(url).then(function (result) {\n      var data = result.data;\n      setIsLoading(false);\n      setResultsData(data);\n    })[\"catch\"](function (error) {\n      console.log(error);\n    }); // }\n  }, [search, query, offset, selectedFormats, selectedArtistIds, selectedGenders, selectedExhibitionIds]);\n\n  var handleSearchInputChange = function handleSearchInputChange(newValue) {\n    setValue(newValue);\n  };\n\n  var handleFormSubmit = function handleFormSubmit(event) {\n    event.preventDefault();\n    Router.push(searchQuery.stringify({\n      search: value,\n      formats: selectedFormats === null || selectedFormats === void 0 ? void 0 : selectedFormats.join(','),\n      artistIds: selectedArtistIds === null || selectedArtistIds === void 0 ? void 0 : selectedArtistIds.join(','),\n      genders: selectedGenders === null || selectedGenders === void 0 ? void 0 : selectedGenders.join(','),\n      exhibitionIds: selectedExhibitionIds === null || selectedExhibitionIds === void 0 ? void 0 : selectedExhibitionIds.join(',')\n    }));\n  };\n\n  return __jsx(\"div\", {\n    className: css.artIndexSearch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: css.content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }\n  }, __jsx(\"form\", {\n    onSubmit: handleFormSubmit,\n    className: css.searchBox,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  }, __jsx(SearchTextInputV2, {\n    className: css.searchInput,\n    placeholder: \"Start searching...\",\n    defaultValue: search,\n    onChange: handleSearchInputChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }), __jsx(ArtIndexCTAButton, {\n    onClick: handleFormSubmit,\n    className: css.searchButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 11\n    }\n  }, \"Search\")), selectedFacets.length > 0 ? __jsx(SearchSelectedFacets, {\n    className: css.selectedFacets,\n    facets: selectedFacets,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 11\n    }\n  }) : null, resultsData && __jsx(\"div\", {\n    className: css.searchInfo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 11\n    }\n  }, __jsx(ArtIndexCTAButton, {\n    className: css.facetsButton,\n    onClick: function onClick() {\n      setIsOpen(!isOpen);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      pointerEvents: 'none'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }\n  }, __jsx(Icon, {\n    name: \"options\",\n    colour: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 17\n    }\n  }), __jsx(\"span\", {\n    style: {\n      marginLeft: 'var(--spacing-xs)',\n      pointerEvents: 'none'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }\n  }, \"Facets\"))), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }\n  }, __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 15\n    }\n  }, resultsData.worksTotal.toLocaleString()), \" results\")), __jsx(\"div\", {\n    className: css.results,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 9\n    }\n  }, isLoading && __jsx(LoaderText, {\n    className: css.loader,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 25\n    }\n  }), __jsx(\"div\", {\n    className: [css.resultsList, isLoading ? css.resultsListLoading : ''].join(' '),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 11\n    }\n  }, results === null || results === void 0 ? void 0 : results.map(function (item) {\n    return __jsx(ArtIndexSearchResult, {\n      item: item,\n      key: item.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 22\n      }\n    });\n  }))), pageCount > 0 ? __jsx(Paginate, {\n    className: css.paginate,\n    pageCount: pageCount,\n    initialPage: initialPage,\n    hrefBuilder: function hrefBuilder(pageNo) {\n      var index = pageNo - 1;\n      var newOffset = index !== 0 ? (index * countPerPage).toString() : null;\n      return searchQuery.stringify(_objectSpread(_objectSpread({}, query), {}, {\n        offset: newOffset\n      }));\n    },\n    onPageChange: function onPageChange(_ref) {\n      var selected = _ref.selected;\n\n      if (selected >= 0 && selected !== Infinity) {\n        var newOffset = selected !== 0 ? (selected * countPerPage).toString() : null;\n        var url = searchQuery.stringify(_objectSpread(_objectSpread({}, query), {}, {\n          offset: newOffset\n        }));\n        Router.push(url).then(function () {\n          window.scrollTo(0, 0);\n        });\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 11\n    }\n  }) : null, __jsx(Sidebar, {\n    isOpen: isOpen,\n    className: css.facetSidebar,\n    onCloseClick: function onCloseClick() {\n      setIsOpen(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    className: css.facets,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 11\n    }\n  }, formatData.length > 0 && __jsx(React.Fragment, null, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 17\n    }\n  }, \"Formats\"), __jsx(ArtIndexFormatBubbleChart, {\n    data: formatData,\n    letterWidth: 4,\n    smallCircleLimit: 12,\n    height: 300,\n    onBubbleClick: function onBubbleClick(_, bubble) {\n      Router.push(searchQuery.stringify(_objectSpread(_objectSpread({}, queryRef.current), {}, {\n        formats: bubble.data.name.toLowerCase()\n      })));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 17\n    }\n  })), artistFacets.length > 0 && __jsx(React.Fragment, null, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 17\n    }\n  }, \"Artists\"), __jsx(SearchFacet, {\n    facetValues: artistFacets && artistFacets.map(function (facet) {\n      return {\n        name: facet.name,\n        value: facet.value,\n        url: searchQuery.stringify(_objectSpread(_objectSpread({}, query), {}, {\n          artistIds: facet.id\n        })),\n        imageUrl: facet.thumbnailFile || null\n      };\n    }),\n    showImage: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 17\n    }\n  })), genderFacets.length > 0 && __jsx(React.Fragment, null, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 17\n    }\n  }, \"Genders\"), __jsx(SearchFacet, {\n    facetValues: genderFacets && genderFacets.map(function (facet) {\n      return {\n        name: facet.name,\n        value: facet.value,\n        url: searchQuery.stringify(_objectSpread(_objectSpread({}, query), {}, {\n          genders: facet.id\n        }))\n      };\n    }),\n    showGender: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 17\n    }\n  })), yearData.length > 0 && __jsx(React.Fragment, null, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 17\n    }\n  }, \"Years\"), __jsx(BarChart, {\n    data: yearData || [],\n    className: css.artistsChart,\n    rotateXAxis: true,\n    xAxisTickIncrement: 10,\n    xAxisTickValuesNumeric: true,\n    margin: {\n      top: 20,\n      right: 3,\n      bottom: 70,\n      left: 30\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 17\n    }\n  })), exhibitionData.length > 0 && __jsx(React.Fragment, null, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 17\n    }\n  }, \"Exhibitions\"), __jsx(SearchFacet, {\n    facetValues: exhibitionData && exhibitionData.map(function (exhibition) {\n      return {\n        name: exhibition.name,\n        value: exhibition.value,\n        url: searchQuery.stringify(_objectSpread(_objectSpread({}, query), {}, {\n          exhibitionIds: exhibition.id\n        }))\n      };\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 17\n    }\n  }))))));\n};\n\n_s(ArtIndexSearchPage, \"M2yrtNBqNt8rDyI1TOAZURUpsFc=\", false, function () {\n  return [useRouter, useAsyncReference];\n});\n\n_c = ArtIndexSearchPage;\n\nvar SearchFacet = function SearchFacet(_ref2) {\n  _s2();\n\n  var _ref2$facetValues = _ref2.facetValues,\n      facetValues = _ref2$facetValues === void 0 ? [] : _ref2$facetValues,\n      _ref2$limit = _ref2.limit,\n      limit = _ref2$limit === void 0 ? 5 : _ref2$limit,\n      _ref2$showImage = _ref2.showImage,\n      showImage = _ref2$showImage === void 0 ? false : _ref2$showImage,\n      _ref2$showGender = _ref2.showGender,\n      showGender = _ref2$showGender === void 0 ? false : _ref2$showGender;\n\n  var _React$useState9 = React.useState(limit),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      newLimit = _React$useState10[0],\n      setNewLimit = _React$useState10[1];\n\n  var showButton = newLimit < facetValues.length;\n  return __jsx(\"div\", {\n    className: css.artistFacets,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 5\n    }\n  }, facetValues.slice(0, newLimit).map(function (facetValue) {\n    return __jsx(\"p\", {\n      key: facetValue.url,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 11\n      }\n    }, __jsx(Link, {\n      as: facetValue.url,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 13\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 15\n      }\n    }, showImage && __jsx(ArtIndexArtistThumbnail, {\n      file: facetValue.imageUrl,\n      size: \"xs\",\n      className: css.artistFacetThumbnail,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 19\n      }\n    }), showGender && __jsx(\"div\", {\n      className: css.artistFacetGender,\n      style: _objectSpread({}, facetValue.name !== 'Unknown' ? {\n        backgroundColor: \"var(--colour-art-index-\".concat(facetValue.name.toLocaleLowerCase(), \")\")\n      } : {}),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 19\n      }\n    }), facetValue.name)), __jsx(\"span\", {\n      className: css.artistFacetValue,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 13\n      }\n    }, facetValue.value));\n  }), showButton && __jsx(TextButton, {\n    onClick: function onClick() {\n      setNewLimit(newLimit + 10);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 9\n    }\n  }, \"Show more\"));\n}; // function isEmpty(obj) {\n//   return Object.keys(obj).length === 0 && obj.constructor === Object;\n// }\n\n\n_s2(SearchFacet, \"wVAoXmAmpCWeyvR1Uh8aj9UVtME=\");\n\n_c2 = SearchFacet;\nexport default ArtIndexSearchPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ArtIndexSearchPage\");\n$RefreshReg$(_c2, \"SearchFacet\");","map":{"version":3,"sources":["/Users/luked/Documents/slnsw/dxlab-art-index/components/ArtIndexSearch/ArtIndexSearch.tsx"],"names":["React","Router","useRouter","BarChart","ArtIndexFormatBubbleChart","SearchTextInputV2","ArtIndexSearchResult","LoaderText","SearchSelectedFacets","ArtIndexCTAButton","ArtIndexArtistThumbnail","Paginate","Sidebar","Link","TextButton","createSearchQuery","useAsyncReference","axios","css","Icon","searchQuery","baseUrl","searchApiQuery","ArtIndexSearchPage","router","query","queryRef","search","offset","parseInt","useState","value","setValue","resultsData","setResultsData","isLoading","setIsLoading","isOpen","setIsOpen","selectedFormats","useMemo","formats","split","selectedArtistIds","artistIds","selectedGenders","genders","selectedExhibitionIds","exhibitionIds","results","works","formatData","facets","map","f","item","count","total","artistFacets","artists","a","id","name","firstName","lastName","thumbnailFile","gender","genderFacets","g","type","exhibitionData","exhibitions","e","unpaddedYearData","years","sort","b","yearData","minYear","maxYear","length","y","temp","filter","i","toString","val","push","selectedFacets","format","url","stringifyAction","key","artistId","artist","find","Boolean","exhibitionId","exhibition","countPerPage","pageCount","Math","ceil","worksTotal","initialPage","floor","useEffect","stringify","join","get","then","result","data","error","console","log","handleSearchInputChange","newValue","handleFormSubmit","event","preventDefault","artIndexSearch","content","searchBox","searchInput","searchButton","searchInfo","facetsButton","display","alignItems","pointerEvents","marginLeft","toLocaleString","loader","resultsList","resultsListLoading","paginate","pageNo","index","newOffset","selected","Infinity","window","scrollTo","facetSidebar","_","bubble","current","toLowerCase","facet","imageUrl","artistsChart","top","right","bottom","left","SearchFacet","facetValues","limit","showImage","showGender","newLimit","setNewLimit","showButton","slice","facetValue","artistFacetThumbnail","artistFacetGender","backgroundColor","toLocaleLowerCase","artistFacetValue"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Router, { useRouter } from 'next/router';\nimport { AxiosResponse } from 'axios';\n\nimport BarChart from '../BarChart';\nimport ArtIndexFormatBubbleChart from '../ArtIndexFormatBubbleChart';\nimport SearchTextInputV2 from '../SearchTextInput/SearchTextInputV2';\nimport ArtIndexSearchResult from '../ArtIndexSearchResult';\nimport LoaderText from '../LoaderText';\nimport SearchSelectedFacets from '../SearchSelectedFacets';\nimport ArtIndexCTAButton from '../ArtIndexCTAButton';\nimport ArtIndexArtistThumbnail from '../ArtIndexArtistThumbnail';\nimport Paginate from '../Paginate';\nimport Sidebar from '../Sidebar';\nimport Link from '../Link';\nimport TextButton from '../TextButton';\n\nimport createSearchQuery from '../../lib/create-search-query';\nimport { useAsyncReference } from '../../lib/hooks/use-async-reference';\nimport axios from '../../lib/axios';\n\nimport { ArtIndexApiWorksResult } from '../../types/art-index-types';\n\nimport css from './ArtIndexSearch.module.scss';\nimport Icon from '../Icon';\n\ntype Query = {\n  search?: string;\n  formats?: string;\n  artistIds?: string;\n  genders?: string;\n  exhibitionIds?: string;\n  offset?: string;\n};\n\nconst searchQuery = createSearchQuery<Query>({\n  baseUrl: '/art-index/search/',\n});\n\nconst searchApiQuery = createSearchQuery<Query>({\n  baseUrl: '/api/art-index/works',\n});\n\nconst ArtIndexSearchPage = () => {\n  const router = useRouter();\n  const query = router.query as Query;\n  const queryRef = useAsyncReference<Query>(query, true);\n  const { search } = query;\n  const offset = parseInt(query.offset, 10);\n\n  const [value, setValue] = React.useState('');\n  const [\n    resultsData,\n    setResultsData,\n  ] = React.useState<ArtIndexApiWorksResult>();\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  // Selected Facets\n  const selectedFormats = React.useMemo(() => {\n    return query.formats?.split(',') || [];\n  }, [query.formats]);\n\n  const selectedArtistIds = React.useMemo(() => {\n    return query.artistIds?.split(',') || [];\n  }, [query.artistIds]);\n\n  const selectedGenders = React.useMemo(() => {\n    return query.genders?.split(',') || [];\n  }, [query.genders]);\n\n  const selectedExhibitionIds = React.useMemo(() => {\n    return query.exhibitionIds?.split(',') || [];\n  }, [query.exhibitionIds]);\n\n  // Results\n  const results = resultsData?.works || [];\n\n  // Facets\n  const formatData =\n    resultsData?.facets.formats.map((f) => ({\n      item: f.value,\n      count: f.total,\n    })) || [];\n  const artistFacets =\n    resultsData?.facets.artists.map((a) => ({\n      id: a.id,\n      name: `${a.value.firstName} ${a.value.lastName}`,\n      thumbnailFile: a.value.thumbnailFile,\n      gender: a.value.gender,\n      value: a.total,\n    })) || [];\n  const genderFacets =\n    resultsData?.facets.genders.map((g) => ({\n      id: g.type,\n      name: g.value,\n      value: g.total,\n    })) || [];\n  const exhibitionData =\n    resultsData?.facets.exhibitions.map((e) => ({\n      id: e.id,\n      name: e.value,\n      value: e.total,\n    })) || [];\n  const unpaddedYearData =\n    resultsData?.facets.years\n      .map((e) => ({\n        name: e.id,\n        value: e.total,\n      }))\n      .sort((a, b) => parseInt(a.name, 10) - parseInt(b.name, 10)) || [];\n  // now pad it out and add any years that have no data - we want all years shown.\n  const yearData = [];\n  const minYear = unpaddedYearData[0]?.name;\n  const maxYear = unpaddedYearData[unpaddedYearData.length - 1]?.name;\n  for (let y = minYear; y <= maxYear; y++) {\n    const temp = unpaddedYearData.filter((i) => i.name === y.toString());\n    const val = temp[0]?.value || 0;\n    yearData.push({\n      name: y.toString(),\n      value: val,\n    });\n  }\n\n  // Selected Facets\n  const selectedFacets = [\n    ...selectedFormats.map((format) => ({\n      name: format,\n      value: format,\n      url: searchQuery.stringifyAction(query, {\n        type: 'remove',\n        key: 'formats',\n        value: format,\n      }),\n    })),\n    ...selectedArtistIds\n      .filter((artistId) => {\n        const artist = artistFacets.find((a) => a.id === artistId);\n\n        return Boolean(artist);\n      })\n      .map((artistId) => {\n        const artist = artistFacets.find((a) => a.id === artistId);\n\n        return {\n          name: artist.name,\n          value: artistId,\n          url: searchQuery.stringifyAction(query, {\n            type: 'remove',\n            key: 'artistIds',\n            value: artistId,\n          }),\n        };\n      }),\n    ...selectedGenders.map((gender) => ({\n      name: gender === 'unknown' ? 'Unknown gender' : gender,\n      value: gender,\n      url: searchQuery.stringifyAction(query, {\n        type: 'remove',\n        key: 'genders',\n        value: gender,\n      }),\n    })),\n    ...selectedExhibitionIds\n      .filter((exhibitionId) => {\n        const exhibition = exhibitionData.find((a) => a.id === exhibitionId);\n\n        return Boolean(exhibition);\n      })\n      .map((exhibitionId) => {\n        const exhibition = exhibitionData.find((a) => a.id === exhibitionId);\n\n        return {\n          name: exhibition.name,\n          value: exhibitionId,\n          url: searchQuery.stringifyAction(query, {\n            type: 'remove',\n            key: 'exhibitionIds',\n            value: exhibitionId,\n          }),\n        };\n      }),\n  ];\n\n  // Pagination\n  const countPerPage = 20;\n  const pageCount = resultsData\n    ? Math.ceil(resultsData.worksTotal / countPerPage)\n    : null;\n  const initialPage = Math.floor(offset / countPerPage);\n\n  React.useEffect(() => {\n    const url = searchApiQuery.stringify({\n      search,\n      formats: selectedFormats?.join(','),\n      artistIds: selectedArtistIds?.join(','),\n      genders: selectedGenders?.join(','),\n      exhibitionIds: selectedExhibitionIds?.join(','),\n      offset: offset === 0 ? null : offset.toString(),\n    });\n\n    setIsLoading(true);\n\n    axios\n      .get(url)\n      .then((result: AxiosResponse<ArtIndexApiWorksResult>) => {\n        const { data } = result;\n\n        setIsLoading(false);\n        setResultsData(data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n    // }\n  }, [\n    search,\n    query,\n    offset,\n    selectedFormats,\n    selectedArtistIds,\n    selectedGenders,\n    selectedExhibitionIds,\n  ]);\n\n  const handleSearchInputChange = (newValue) => {\n    setValue(newValue);\n  };\n\n  const handleFormSubmit = (event) => {\n    event.preventDefault();\n\n    Router.push(\n      searchQuery.stringify({\n        search: value,\n        formats: selectedFormats?.join(','),\n        artistIds: selectedArtistIds?.join(','),\n        genders: selectedGenders?.join(','),\n        exhibitionIds: selectedExhibitionIds?.join(','),\n      }),\n    );\n  };\n\n  return (\n    <div className={css.artIndexSearch}>\n      <div className={css.content}>\n        <form onSubmit={handleFormSubmit} className={css.searchBox}>\n          <SearchTextInputV2\n            className={css.searchInput}\n            placeholder=\"Start searching...\"\n            defaultValue={search}\n            onChange={handleSearchInputChange}\n          />\n\n          <ArtIndexCTAButton\n            onClick={handleFormSubmit}\n            className={css.searchButton}\n          >\n            Search\n          </ArtIndexCTAButton>\n        </form>\n\n        {selectedFacets.length > 0 ? (\n          <SearchSelectedFacets\n            className={css.selectedFacets}\n            facets={selectedFacets}\n          />\n        ) : null}\n\n        {resultsData && (\n          <div className={css.searchInfo}>\n            <ArtIndexCTAButton\n              className={css.facetsButton}\n              onClick={() => {\n                setIsOpen(!isOpen);\n              }}\n            >\n              <div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  pointerEvents: 'none',\n                }}\n              >\n                <Icon name=\"options\" colour=\"white\" />\n                <span\n                  style={{\n                    marginLeft: 'var(--spacing-xs)',\n                    pointerEvents: 'none',\n                  }}\n                >\n                  Facets\n                </span>\n              </div>\n            </ArtIndexCTAButton>\n            <p>\n              <strong>{resultsData.worksTotal.toLocaleString()}</strong> results\n            </p>\n          </div>\n        )}\n\n        <div className={css.results}>\n          {isLoading && <LoaderText className={css.loader} />}\n\n          <div\n            className={[\n              css.resultsList,\n              isLoading ? css.resultsListLoading : '',\n            ].join(' ')}\n          >\n            {results?.map((item) => {\n              return <ArtIndexSearchResult item={item} key={item.id} />;\n            })}\n          </div>\n        </div>\n\n        {pageCount > 0 ? (\n          <Paginate\n            className={css.paginate}\n            pageCount={pageCount}\n            initialPage={initialPage}\n            hrefBuilder={(pageNo) => {\n              const index = pageNo - 1;\n              const newOffset =\n                index !== 0 ? (index * countPerPage).toString() : null;\n\n              return searchQuery.stringify({\n                ...query,\n                offset: newOffset,\n              });\n            }}\n            onPageChange={({ selected }) => {\n              if (selected >= 0 && selected !== Infinity) {\n                const newOffset =\n                  selected !== 0 ? (selected * countPerPage).toString() : null;\n                const url = searchQuery.stringify({\n                  ...query,\n                  offset: newOffset,\n                });\n\n                Router.push(url).then(() => {\n                  window.scrollTo(0, 0);\n                });\n              }\n            }}\n          />\n        ) : null}\n\n        <Sidebar\n          isOpen={isOpen}\n          className={css.facetSidebar}\n          onCloseClick={() => {\n            setIsOpen(false);\n          }}\n        >\n          <aside className={css.facets}>\n            {formatData.length > 0 && (\n              <>\n                <h2>Formats</h2>\n\n                <ArtIndexFormatBubbleChart\n                  data={formatData}\n                  letterWidth={4}\n                  smallCircleLimit={12}\n                  height={300}\n                  onBubbleClick={(_, bubble) => {\n                    Router.push(\n                      searchQuery.stringify({\n                        ...queryRef.current,\n                        formats: bubble.data.name.toLowerCase(),\n                      }),\n                    );\n                  }}\n                />\n              </>\n            )}\n\n            {artistFacets.length > 0 && (\n              <>\n                <h2>Artists</h2>\n\n                <SearchFacet\n                  facetValues={\n                    artistFacets &&\n                    artistFacets.map((facet) => {\n                      return {\n                        name: facet.name,\n                        value: facet.value,\n                        url: searchQuery.stringify({\n                          ...query,\n                          artistIds: facet.id,\n                        }),\n                        imageUrl: facet.thumbnailFile || null,\n                      };\n                    })\n                  }\n                  showImage={true}\n                />\n              </>\n            )}\n\n            {genderFacets.length > 0 && (\n              <>\n                <h2>Genders</h2>\n\n                <SearchFacet\n                  facetValues={\n                    genderFacets &&\n                    genderFacets.map((facet) => {\n                      return {\n                        name: facet.name,\n                        value: facet.value,\n                        url: searchQuery.stringify({\n                          ...query,\n                          genders: facet.id,\n                        }),\n                      };\n                    })\n                  }\n                  showGender={true}\n                />\n              </>\n            )}\n\n            {yearData.length > 0 && (\n              <>\n                <h2>Years</h2>\n\n                <BarChart\n                  data={yearData || []}\n                  className={css.artistsChart}\n                  rotateXAxis={true}\n                  xAxisTickIncrement={10}\n                  xAxisTickValuesNumeric={true}\n                  margin={{ top: 20, right: 3, bottom: 70, left: 30 }}\n                />\n              </>\n            )}\n\n            {exhibitionData.length > 0 && (\n              <>\n                <h2>Exhibitions</h2>\n\n                <SearchFacet\n                  facetValues={\n                    exhibitionData &&\n                    exhibitionData.map((exhibition) => {\n                      return {\n                        name: exhibition.name,\n                        value: exhibition.value,\n                        url: searchQuery.stringify({\n                          ...query,\n                          exhibitionIds: exhibition.id,\n                        }),\n                      };\n                    })\n                  }\n                />\n              </>\n            )}\n          </aside>\n        </Sidebar>\n      </div>\n    </div>\n  );\n};\n\ntype SearchFacetProps = {\n  facetValues?: {\n    name: string;\n    url: string;\n    value: number;\n    imageUrl?: string;\n  }[];\n  limit?: number;\n  showImage?: boolean;\n  showGender?: boolean;\n};\n\nconst SearchFacet = ({\n  facetValues = [],\n  limit = 5,\n  showImage = false,\n  showGender = false,\n}: SearchFacetProps) => {\n  const [newLimit, setNewLimit] = React.useState(limit);\n  const showButton = newLimit < facetValues.length;\n\n  return (\n    <div className={css.artistFacets}>\n      {facetValues.slice(0, newLimit).map((facetValue) => {\n        return (\n          <p key={facetValue.url}>\n            <Link as={facetValue.url}>\n              <a>\n                {showImage && (\n                  <ArtIndexArtistThumbnail\n                    file={facetValue.imageUrl}\n                    size=\"xs\"\n                    className={css.artistFacetThumbnail}\n                  />\n                )}\n\n                {showGender && (\n                  <div\n                    className={css.artistFacetGender}\n                    style={{\n                      ...(facetValue.name !== 'Unknown'\n                        ? {\n                            backgroundColor: `var(--colour-art-index-${facetValue.name.toLocaleLowerCase()})`,\n                          }\n                        : {}),\n                    }}\n                  ></div>\n                )}\n\n                {facetValue.name}\n              </a>\n            </Link>\n\n            <span className={css.artistFacetValue}>{facetValue.value}</span>\n          </p>\n        );\n      })}\n\n      {showButton && (\n        <TextButton\n          onClick={() => {\n            setNewLimit(newLimit + 10);\n          }}\n        >\n          Show more\n        </TextButton>\n      )}\n    </div>\n  );\n};\n\n// function isEmpty(obj) {\n//   return Object.keys(obj).length === 0 && obj.constructor === Object;\n// }\n\nexport default ArtIndexSearchPage;\n"]},"metadata":{},"sourceType":"module"}