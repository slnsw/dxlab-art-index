{"ast":null,"code":"var _jsxFileName = \"/Users/luked/Documents/slnsw/dxlab-art-index/components/HierarchyColumnBrowser/HierarchyColumnBrowser.tsx\";\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport { transformFlatToLists } from './hierarchyUtils'; // import { useKeyPressCallback } from '../../lib/hooks';\n// import { hashDep } from '../../lib';\n// import Loader from '../Loader';\n\nimport HierarchyBrowserList from './HierarchyColumnBrowserList'; // import { HierarchyBrowserItem } from '../../types/hierarchyTypes';\n\nimport css from './HierarchyColumnBrowser.module.scss';\n\nconst HierarchyBrowser = ({\n  items = [],\n  originId,\n  rowHeight = 80,\n  colWidth,\n  className,\n  listInfoComponent,\n  rowComponent,\n  listPreviewComponent,\n  onChange,\n  onRowsRendered,\n  onScroll\n}) => {\n  const [selectedId, setSelectedId] = React.useState(originId);\n  const [isMounted, setIsMounted] = React.useState(false);\n  const containerRef = React.useRef(null);\n  const listsRef = React.useRef([]); // console.log(selectedId);\n  // Cache 'lists' and only transform if items or selectedId changes\n\n  const lists = React.useMemo(() => transformFlatToLists(items, selectedId), [// hashDep(items),\n  items, selectedId]); // Derive selected item and list\n\n  const {\n    selectedItem // selectedListIndex\n\n  } = getSelectedInfo(lists, selectedId); // Reduce jumpiness of horizontal scrolling with some extra blank lists\n\n  const [maxLists, setMaxLists] = React.useState(lists.length);\n  const blankListTotal = maxLists - lists.length <= 0 ? 0 : maxLists - lists.length;\n  React.useEffect(() => {\n    /**\n     * Update length of listsRef whenever lists changes\n     */\n    listsRef.current = listsRef.current.slice(0, lists.length);\n    /**\n     * Update maxLists if new list total is greater\n     * Reduces horizontal jumpiness\n     */\n\n    if (lists.length > maxLists) {\n      setMaxLists(lists.length);\n    }\n  }, [// hashDep(lists),\n  maxLists, lists]);\n  const selectedItemId = selectedItem && selectedItem.id || null;\n  /**\n   * Scroll list into view\n   * TODO: Only scroll if selectedList partially not in view\n   */\n\n  React.useEffect(() => {\n    if (listsRef.current) {\n      const selectedList = listsRef.current[listsRef.current.length - 1];\n\n      if (selectedList) {\n        selectedList.scrollIntoView({\n          // 'smooth' doesn't work on first mount for some reason\n          behavior: isMounted ? 'smooth' : 'auto',\n          inline: 'end'\n        });\n        setIsMounted(true);\n      }\n    }\n  }, [selectedItemId, lists.length, isMounted]); // useKeyPressCallback(\n  //   'ArrowLeft',\n  //   (event) => {\n  //     if (selectedItem) {\n  //       const {\n  //         selectedItem: parentItem,\n  //         selectedRowIndex: parentRowIndex,\n  //         selectedListIndex: parentListIndex,\n  //       } = getSelectedInfo(lists, selectedItem.parentId);\n  //       handleChange(event, {\n  //         item: parentItem,\n  //         rowIndex: parentRowIndex,\n  //         listIndex: parentListIndex,\n  //       });\n  //     }\n  //   },\n  //   [selectedItem],\n  // );\n  // TODO: Not quite working yet. Issue with focus on children list\n  // useKeyPressCallback(\n  //   'ArrowRight',\n  //   (event) => {\n  //     const totalLists = lists.length;\n  //     const hasChildren = selectedListIndex + 1 < totalLists;\n  //     if (hasChildren) {\n  //       const childListIndex = totalLists - 1;\n  //       const childItem = lists[childListIndex][0];\n  //       const childRowIndex = 0;\n  //       handleChange(event, {\n  //         item: childItem,\n  //         rowIndex: childRowIndex,\n  //         listIndex: childListIndex,\n  //       });\n  //     }\n  //   },\n  //   [lists],\n  // );\n\n  /**\n   * Change selectedId, causing lists to rebuild\n   * Also sends changes to outside of the component for data updates\n   */\n\n  const handleChange = (event, {\n    item,\n    rowIndex,\n    listIndex\n  }) => {\n    setSelectedId(item.id);\n\n    if (typeof onChange === 'function') {\n      onChange(event, {\n        item,\n        rowIndex,\n        listIndex\n      });\n    }\n  };\n\n  let ListPreviewComponent;\n\n  if (typeof listPreviewComponent === 'function') {\n    ListPreviewComponent = listPreviewComponent;\n  } else {\n    ListPreviewComponent = __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 28\n      }\n    }, \"No children\");\n  }\n\n  return __jsx(\"div\", {\n    className: [css.hierarchyBrowser, className || ''].join(' '),\n    ref: containerRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }, lists.map((listItems, index) => {\n    const defaultScrollToIndex = listItems.findIndex(listItem => {\n      return listItem.isSelected;\n    });\n    const isListSelected = checkIsListSelected(listItems, selectedId);\n    const isLoading = checkIsLoading(listItems);\n    const isListPreview = checkIsListPreview(listItems);\n    const colWidthCss = typeof colWidth === 'function' && colWidth({\n      listItems,\n      index\n    }) ? css.thinList : css.list;\n    return __jsx(\"div\", {\n      className: colWidthCss,\n      key: index,\n      ref: el => {\n        listsRef.current[index] = el;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }\n    }, (() => {\n      if (isLoading) {\n        // return <Loader isLoading={true} className={css.loader} />;\n        return 'Loader';\n      }\n\n      if (isListPreview) {\n        return __jsx(ListPreviewComponent, {\n          item: selectedItem,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 24\n          }\n        });\n      }\n\n      return __jsx(HierarchyBrowserList, {\n        items: listItems,\n        index: index,\n        originId: originId,\n        rowHeight: rowHeight,\n        isListSelected: isListSelected,\n        defaultScrollToIndex: defaultScrollToIndex,\n        key: index,\n        listInfoComponent: listInfoComponent,\n        rowComponent: rowComponent,\n        onChange: handleChange,\n        onRowsRendered: onRowsRendered,\n        onScroll: onScroll,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }\n      });\n    })());\n  }), [...Array(blankListTotal)].map((_, index) => {\n    return __jsx(\"div\", {\n      key: index,\n      className: css.list,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 16\n      }\n    });\n  }));\n};\n\nfunction getSelectedInfo(lists, selectedId) {\n  let selectedListIndex;\n  let selectedRowIndex;\n  let selectedItem;\n  lists.forEach((list, listIndex) => {\n    const itemFound = list.find((item, rowIndex) => {\n      if (item.id === selectedId) {\n        selectedRowIndex = rowIndex;\n        selectedItem = item;\n      }\n\n      return item.id === selectedId;\n    });\n\n    if (itemFound) {\n      selectedListIndex = listIndex;\n    }\n  });\n  return {\n    selectedListIndex,\n    selectedItem,\n    selectedRowIndex\n  };\n}\n\nconst checkIsListSelected = (listItems, selectedId) => {\n  return listItems.findIndex(listItem => {\n    return listItem.id === selectedId;\n  }) >= 0;\n};\n\nconst checkIsLoading = listItems => {\n  return listItems.findIndex(listItem => {\n    return listItem.type === 'loader';\n  }) >= 0;\n};\n\nconst checkIsListPreview = listItems => {\n  return listItems.findIndex(listItem => {\n    return listItem.type === 'listPreview';\n  }) >= 0;\n};\n\nexport default HierarchyBrowser;","map":{"version":3,"sources":["/Users/luked/Documents/slnsw/dxlab-art-index/components/HierarchyColumnBrowser/HierarchyColumnBrowser.tsx"],"names":["React","transformFlatToLists","HierarchyBrowserList","css","HierarchyBrowser","items","originId","rowHeight","colWidth","className","listInfoComponent","rowComponent","listPreviewComponent","onChange","onRowsRendered","onScroll","selectedId","setSelectedId","useState","isMounted","setIsMounted","containerRef","useRef","listsRef","lists","useMemo","selectedItem","getSelectedInfo","maxLists","setMaxLists","length","blankListTotal","useEffect","current","slice","selectedItemId","id","selectedList","scrollIntoView","behavior","inline","handleChange","event","item","rowIndex","listIndex","ListPreviewComponent","hierarchyBrowser","join","map","listItems","index","defaultScrollToIndex","findIndex","listItem","isSelected","isListSelected","checkIsListSelected","isLoading","checkIsLoading","isListPreview","checkIsListPreview","colWidthCss","thinList","list","el","Array","_","selectedListIndex","selectedRowIndex","forEach","itemFound","find","type"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { transformFlatToLists } from './hierarchyUtils';\n// import { useKeyPressCallback } from '../../lib/hooks';\n// import { hashDep } from '../../lib';\n\n// import Loader from '../Loader';\nimport HierarchyBrowserList from './HierarchyColumnBrowserList';\n\n// import { HierarchyBrowserItem } from '../../types/hierarchyTypes';\n\nimport css from './HierarchyColumnBrowser.module.scss';\n\ntype Props = {\n  /** Flattened items that HierarchyBrowser builds lists from */\n  // items: HierarchyBrowserItem;\n  items: any[];\n  originId: string;\n  rowHeight?: number | Function;\n  colWidth?: Function; // function should return TRUE if column is to use 'thin col' css\n  className?: string;\n  listInfoComponent?: React.ReactNode;\n  rowComponent?: React.ReactNode;\n  listPreviewComponent?: React.ReactNode;\n  onChange?: Function;\n  onRowsRendered?: Function;\n  onScroll?: Function;\n};\n\nconst HierarchyBrowser: React.FunctionComponent<Props> = ({\n  items = [],\n  originId,\n  rowHeight = 80,\n  colWidth,\n  className,\n  listInfoComponent,\n  rowComponent,\n  listPreviewComponent,\n  onChange,\n  onRowsRendered,\n  onScroll,\n}) => {\n  const [selectedId, setSelectedId] = React.useState(originId);\n  const [isMounted, setIsMounted] = React.useState(false);\n  const containerRef = React.useRef(null);\n  const listsRef = React.useRef([]);\n\n  // console.log(selectedId);\n\n  // Cache 'lists' and only transform if items or selectedId changes\n  const lists = React.useMemo(() => transformFlatToLists(items, selectedId), [\n    // hashDep(items),\n    items,\n    selectedId,\n  ]);\n\n  // Derive selected item and list\n  const {\n    selectedItem,\n    // selectedListIndex\n  } = getSelectedInfo(lists, selectedId);\n\n  // Reduce jumpiness of horizontal scrolling with some extra blank lists\n  const [maxLists, setMaxLists] = React.useState(lists.length);\n  const blankListTotal =\n    maxLists - lists.length <= 0 ? 0 : maxLists - lists.length;\n\n  React.useEffect(() => {\n    /**\n     * Update length of listsRef whenever lists changes\n     */\n    listsRef.current = listsRef.current.slice(0, lists.length);\n\n    /**\n     * Update maxLists if new list total is greater\n     * Reduces horizontal jumpiness\n     */\n    if (lists.length > maxLists) {\n      setMaxLists(lists.length);\n    }\n  }, [\n    // hashDep(lists),\n    maxLists,\n    lists,\n  ]);\n\n  const selectedItemId = (selectedItem && selectedItem.id) || null;\n\n  /**\n   * Scroll list into view\n   * TODO: Only scroll if selectedList partially not in view\n   */\n  React.useEffect(() => {\n    if (listsRef.current) {\n      const selectedList = listsRef.current[listsRef.current.length - 1];\n\n      if (selectedList) {\n        selectedList.scrollIntoView({\n          // 'smooth' doesn't work on first mount for some reason\n          behavior: isMounted ? 'smooth' : 'auto',\n          inline: 'end',\n        });\n\n        setIsMounted(true);\n      }\n    }\n  }, [selectedItemId, lists.length, isMounted]);\n\n  // useKeyPressCallback(\n  //   'ArrowLeft',\n  //   (event) => {\n  //     if (selectedItem) {\n  //       const {\n  //         selectedItem: parentItem,\n  //         selectedRowIndex: parentRowIndex,\n  //         selectedListIndex: parentListIndex,\n  //       } = getSelectedInfo(lists, selectedItem.parentId);\n\n  //       handleChange(event, {\n  //         item: parentItem,\n  //         rowIndex: parentRowIndex,\n  //         listIndex: parentListIndex,\n  //       });\n  //     }\n  //   },\n  //   [selectedItem],\n  // );\n\n  // TODO: Not quite working yet. Issue with focus on children list\n  // useKeyPressCallback(\n  //   'ArrowRight',\n  //   (event) => {\n  //     const totalLists = lists.length;\n  //     const hasChildren = selectedListIndex + 1 < totalLists;\n\n  //     if (hasChildren) {\n  //       const childListIndex = totalLists - 1;\n  //       const childItem = lists[childListIndex][0];\n  //       const childRowIndex = 0;\n\n  //       handleChange(event, {\n  //         item: childItem,\n  //         rowIndex: childRowIndex,\n  //         listIndex: childListIndex,\n  //       });\n  //     }\n  //   },\n  //   [lists],\n  // );\n\n  /**\n   * Change selectedId, causing lists to rebuild\n   * Also sends changes to outside of the component for data updates\n   */\n  const handleChange = (event, { item, rowIndex, listIndex }) => {\n    setSelectedId(item.id);\n\n    if (typeof onChange === 'function') {\n      onChange(event, { item, rowIndex, listIndex });\n    }\n  };\n\n  let ListPreviewComponent;\n\n  if (typeof listPreviewComponent === 'function') {\n    ListPreviewComponent = listPreviewComponent;\n  } else {\n    ListPreviewComponent = <p>No children</p>;\n  }\n\n  return (\n    <div\n      className={[css.hierarchyBrowser, className || ''].join(' ')}\n      ref={containerRef}\n    >\n      {lists.map((listItems, index) => {\n        const defaultScrollToIndex = listItems.findIndex((listItem) => {\n          return listItem.isSelected;\n        });\n\n        const isListSelected = checkIsListSelected(listItems, selectedId);\n        const isLoading = checkIsLoading(listItems);\n        const isListPreview = checkIsListPreview(listItems);\n        const colWidthCss =\n          typeof colWidth === 'function' && colWidth({ listItems, index })\n            ? css.thinList\n            : css.list;\n\n        return (\n          <div\n            className={colWidthCss}\n            key={index}\n            ref={(el) => {\n              listsRef.current[index] = el;\n            }}\n          >\n            {(() => {\n              if (isLoading) {\n                // return <Loader isLoading={true} className={css.loader} />;\n                return 'Loader';\n              }\n\n              if (isListPreview) {\n                return <ListPreviewComponent item={selectedItem} />;\n              }\n\n              return (\n                <HierarchyBrowserList\n                  items={listItems}\n                  index={index}\n                  originId={originId}\n                  rowHeight={rowHeight}\n                  isListSelected={isListSelected}\n                  defaultScrollToIndex={defaultScrollToIndex}\n                  key={index}\n                  listInfoComponent={listInfoComponent}\n                  rowComponent={rowComponent}\n                  onChange={handleChange}\n                  onRowsRendered={onRowsRendered}\n                  onScroll={onScroll}\n                />\n              );\n            })()}\n          </div>\n        );\n      })}\n\n      {/**\n       * Pad out the right side with blank lists to prevent horizontal scroll\n       * jumps\n       */}\n      {[...Array(blankListTotal)].map((_, index) => {\n        return <div key={index} className={css.list}></div>;\n      })}\n    </div>\n  );\n};\n\nfunction getSelectedInfo(lists, selectedId) {\n  let selectedListIndex;\n  let selectedRowIndex;\n  let selectedItem;\n\n  lists.forEach((list, listIndex) => {\n    const itemFound = list.find((item, rowIndex) => {\n      if (item.id === selectedId) {\n        selectedRowIndex = rowIndex;\n        selectedItem = item;\n      }\n\n      return item.id === selectedId;\n    });\n\n    if (itemFound) {\n      selectedListIndex = listIndex;\n    }\n  });\n\n  return { selectedListIndex, selectedItem, selectedRowIndex };\n}\n\nconst checkIsListSelected = (listItems, selectedId) => {\n  return (\n    listItems.findIndex((listItem) => {\n      return listItem.id === selectedId;\n    }) >= 0\n  );\n};\n\nconst checkIsLoading = (listItems) => {\n  return (\n    listItems.findIndex((listItem) => {\n      return listItem.type === 'loader';\n    }) >= 0\n  );\n};\n\nconst checkIsListPreview = (listItems) => {\n  return (\n    listItems.findIndex((listItem) => {\n      return listItem.type === 'listPreview';\n    }) >= 0\n  );\n};\n\nexport default HierarchyBrowser;\n"]},"metadata":{},"sourceType":"module"}