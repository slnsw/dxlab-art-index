{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/luked/Documents/slnsw/dxlab-art-index/pages/art-index.tsx\";\n\nvar __jsx = React.createElement;\nimport React from 'react';\n// import * as d3 from 'd3';\n// import axios from 'axios';\nimport ArtIndexApp from '../components/ArtIndexApp';\nimport ArtIndexHome from '../components/ArtIndexHome';\nimport ArtIndexSearch from '../components/ArtIndexSearch';\nimport ArtIndexArtist from '../components/ArtIndexArtist';\nimport ArtIndexWork from '../components/ArtIndexWork';\nimport ArtIndexCharts from '../components/ArtIndexCharts';\nimport ArtIndexExplore from '../components/ArtIndexExplore';\nimport ArtIndexExhibition from '../components/ArtIndexExhibition';\nimport { ArtIndexProvider } from '../lib/contexts/art-index-context';\nimport axios from '../lib/axios';\nvar config = {\n  home: {\n    pathname: '/art-index',\n    title: 'Home'\n  },\n  search: {\n    pathname: '/art-index/search',\n    title: 'Search'\n  },\n  artist: {\n    pathname: '/art-index/artist/[id]',\n    title: 'Artist'\n  },\n  work: {\n    pathname: '/art-index/work/[id]',\n    title: 'Work'\n  },\n  exhibition: {\n    pathname: '/art-index/exhibition/[id]',\n    title: 'Exhibition'\n  },\n  charts: {\n    pathname: '/art-index/charts',\n    title: 'Charts'\n  },\n  explore: {\n    pathname: '/art-index/explore',\n    title: 'Explore'\n  }\n};\n\nvar ArtIndexPage = function ArtIndexPage(_ref) {\n  var pathname = _ref.pathname,\n      _ref$artist = _ref.artist,\n      artist = _ref$artist === void 0 ? null : _ref$artist,\n      _ref$exhibition = _ref.exhibition,\n      exhibition = _ref$exhibition === void 0 ? null : _ref$exhibition,\n      _ref$work = _ref.work,\n      work = _ref$work === void 0 ? null : _ref$work;\n  var pageConfig = Object.entries(config).find(function (o) {\n    return o[1].pathname === pathname;\n  });\n  var title;\n  var metaDescription;\n  var metaImageUrl;\n  var metaImageAlt;\n  var metaImageWidth;\n  var metaImageHeight;\n\n  if (pathname === config.artist.pathname) {\n    title = \"\".concat(artist.firstName, \" \").concat(artist.lastName, \" (Artist)\");\n  } else if (pathname === config.work.pathname) {\n    title = \"\".concat(work.title, \" (Work)\");\n  } else if (pathname === config.exhibition.pathname) {\n    title = \"\".concat(exhibition.name, \" (Exhibition)\");\n  } else {\n    title = \"\".concat(pageConfig[1].title);\n  }\n\n  if (pathname === config.artist.pathname) {\n    metaDescription = \"Art Index: artist entry for \".concat(artist.firstName, \" \").concat(artist.lastName);\n  } else if (pathname === config.work.pathname) {\n    metaDescription = \"Art Index: entry for '\".concat(work.title, \"' by \").concat(work.artistFirstName, \" \").concat(work.artistLastName);\n  } else if (pathname === config.exhibition.pathname) {\n    metaDescription = \"Art Index: entry for \".concat(exhibition.name, \" (Exhibition)\");\n  } else {\n    metaDescription = \"Art Index - a DX Lab experiment\";\n  }\n\n  if (pathname === config.artist.pathname && artist.thumbnailFile) {\n    metaImageUrl = \"https://dxlab.sl.nsw.gov.au/art-index/images/artists/\".concat(artist.thumbnailFile);\n    metaImageAlt = \"Art Index: image of artist \".concat(artist.firstName, \" \").concat(artist.lastName);\n    metaImageWidth = 600; // ? not true, but they are square...\n\n    metaImageHeight = 600;\n  } else if (pathname === config.work.pathname && work.imageUrl) {\n    metaImageUrl = work.imageUrl;\n    metaImageAlt = \"Art Index: image of '\".concat(work.title, \"' by \").concat(work.artistFirstName, \" \").concat(work.artistLastName);\n  } else {\n    metaImageUrl = 'https://dxlab.sl.nsw.gov.au/art-index/images/art-index-image.jpg';\n    metaImageAlt = \"Art Index - a DX Lab experiment\";\n    metaImageWidth = 1200;\n    metaImageHeight = 627;\n  }\n\n  return __jsx(ArtIndexProvider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, __jsx(ArtIndexApp, {\n    title: title,\n    metaDescription: metaDescription,\n    metaImageUrl: metaImageUrl,\n    metaImageAlt: metaImageAlt,\n    metaImageWidth: metaImageWidth,\n    metaImageHeight: metaImageHeight,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, pathname === config.home.pathname && __jsx(ArtIndexHome, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 47\n    }\n  }), pathname === config.search.pathname && __jsx(ArtIndexSearch, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 49\n    }\n  }), pathname === config.artist.pathname && __jsx(ArtIndexArtist, {\n    artist: artist,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }), pathname === config.exhibition.pathname && __jsx(ArtIndexExhibition, {\n    exhibition: exhibition,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }), pathname === config.work.pathname && __jsx(ArtIndexWork, {\n    work: work,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 47\n    }\n  }), pathname === config.charts.pathname && __jsx(ArtIndexCharts, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 49\n    }\n  }), pathname === config.explore.pathname && __jsx(ArtIndexExplore, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 50\n    }\n  })));\n};\n\n_c = ArtIndexPage;\n\nArtIndexPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n    var req, pathname, query, isServer, host, result, work, _result, artist, _result2, exhibition;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = _ref2.req, pathname = _ref2.pathname, query = _ref2.query;\n            isServer = Boolean(req);\n            host = isServer ? \"http://\".concat(req.headers.host) : '';\n\n            if (!(pathname === config.work.pathname)) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 6;\n            return axios.get(\"\".concat(host, \"/api/art-index/works/\").concat(query.id));\n\n          case 6:\n            result = _context.sent;\n            work = result.data;\n            return _context.abrupt(\"return\", {\n              work: work,\n              pathname: pathname\n            });\n\n          case 9:\n            if (!(pathname === config.artist.pathname)) {\n              _context.next = 15;\n              break;\n            }\n\n            _context.next = 12;\n            return axios.get(\"\".concat(host, \"/api/art-index/artists/\").concat(query.id));\n\n          case 12:\n            _result = _context.sent;\n            artist = _result.data;\n            return _context.abrupt(\"return\", {\n              artist: artist,\n              pathname: pathname\n            });\n\n          case 15:\n            if (!(pathname === config.exhibition.pathname)) {\n              _context.next = 21;\n              break;\n            }\n\n            _context.next = 18;\n            return axios.get(\"\".concat(host, \"/api/art-index/exhibitions/\").concat(query.id));\n\n          case 18:\n            _result2 = _context.sent;\n            exhibition = _result2.data;\n            return _context.abrupt(\"return\", {\n              exhibition: exhibition,\n              pathname: pathname\n            });\n\n          case 21:\n            return _context.abrupt(\"return\", {\n              pathname: pathname,\n              query: query\n            });\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default ArtIndexPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ArtIndexPage\");","map":{"version":3,"sources":["/Users/luked/Documents/slnsw/dxlab-art-index/pages/art-index.tsx"],"names":["React","ArtIndexApp","ArtIndexHome","ArtIndexSearch","ArtIndexArtist","ArtIndexWork","ArtIndexCharts","ArtIndexExplore","ArtIndexExhibition","ArtIndexProvider","axios","config","home","pathname","title","search","artist","work","exhibition","charts","explore","ArtIndexPage","pageConfig","Object","entries","find","o","metaDescription","metaImageUrl","metaImageAlt","metaImageWidth","metaImageHeight","firstName","lastName","name","artistFirstName","artistLastName","thumbnailFile","imageUrl","getInitialProps","req","query","isServer","Boolean","host","headers","get","id","result","data"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { NextPage, NextPageContext } from 'next';\n// import * as d3 from 'd3';\n// import axios from 'axios';\n\nimport ArtIndexApp from '../components/ArtIndexApp';\nimport ArtIndexHome from '../components/ArtIndexHome';\nimport ArtIndexSearch from '../components/ArtIndexSearch';\nimport ArtIndexArtist from '../components/ArtIndexArtist';\nimport ArtIndexWork from '../components/ArtIndexWork';\nimport ArtIndexCharts from '../components/ArtIndexCharts';\nimport ArtIndexExplore from '../components/ArtIndexExplore';\nimport ArtIndexExhibition from '../components/ArtIndexExhibition';\n\nimport { ArtIndexProvider } from '../lib/contexts/art-index-context';\nimport {\n  ArtIndexArtistType,\n  ArtIndexExhibitionType,\n  ArtIndexWorkType,\n} from '../types/art-index-types';\nimport axios from '../lib/axios';\n\nconst config = {\n  home: { pathname: '/art-index' as const, title: 'Home' },\n  search: { pathname: '/art-index/search' as const, title: 'Search' },\n  artist: { pathname: '/art-index/artist/[id]' as const, title: 'Artist' },\n  work: { pathname: '/art-index/work/[id]' as const, title: 'Work' },\n  exhibition: {\n    pathname: '/art-index/exhibition/[id]' as const,\n    title: 'Exhibition',\n  },\n  charts: { pathname: '/art-index/charts' as const, title: 'Charts' },\n  explore: { pathname: '/art-index/explore' as const, title: 'Explore' },\n};\n\ntype Pathnames = {\n  home: typeof config['home']['pathname'];\n  search: typeof config['search']['pathname'];\n  artist: typeof config['artist']['pathname'];\n  work: typeof config['work']['pathname'];\n  exhibition: typeof config['exhibition']['pathname'];\n  charts: typeof config['charts']['pathname'];\n  explore: typeof config['explore']['pathname'];\n};\n\ntype ValueOf<T> = T[keyof T];\n\ntype PathnameList = ValueOf<Pathnames>;\n\ntype Props =\n  | {\n      pathname: Pathnames['home'] | Pathnames['charts'] | Pathnames['explore'];\n      artist?: never;\n      exhibition?: never;\n      work?: never;\n    }\n  | {\n      pathname: Pathnames['search'];\n      query?: {\n        id?: string;\n      };\n      artist?: never;\n      exhibition?: never;\n      work?: never;\n    }\n  | {\n      pathname: Pathnames['artist'];\n      artist: ArtIndexArtistType;\n      exhibition?: never;\n      work?: never;\n    }\n  | {\n      pathname: Pathnames['work'];\n      artist?: never;\n      exhibition?: never;\n      work: ArtIndexWorkType;\n    }\n  | {\n      pathname: Pathnames['exhibition'];\n      artist?: never;\n      exhibition: ArtIndexExhibitionType;\n      work?: never;\n    };\n\nconst ArtIndexPage: NextPage<Props> = ({\n  pathname,\n  artist = null,\n  exhibition = null,\n  work = null,\n}) => {\n  const pageConfig = Object.entries(config).find(\n    (o) => o[1].pathname === pathname,\n  );\n\n  let title;\n  let metaDescription;\n  let metaImageUrl;\n  let metaImageAlt;\n  let metaImageWidth;\n  let metaImageHeight;\n\n  if (pathname === config.artist.pathname) {\n    title = `${artist.firstName} ${artist.lastName} (Artist)`;\n  } else if (pathname === config.work.pathname) {\n    title = `${work.title} (Work)`;\n  } else if (pathname === config.exhibition.pathname) {\n    title = `${exhibition.name} (Exhibition)`;\n  } else {\n    title = `${pageConfig[1].title}`;\n  }\n\n  if (pathname === config.artist.pathname) {\n    metaDescription = `Art Index: artist entry for ${artist.firstName} ${artist.lastName}`;\n  } else if (pathname === config.work.pathname) {\n    metaDescription = `Art Index: entry for '${work.title}' by ${work.artistFirstName} ${work.artistLastName}`;\n  } else if (pathname === config.exhibition.pathname) {\n    metaDescription = `Art Index: entry for ${exhibition.name} (Exhibition)`;\n  } else {\n    metaDescription = `Art Index - a DX Lab experiment`;\n  }\n\n  if (pathname === config.artist.pathname && artist.thumbnailFile) {\n    metaImageUrl = `https://dxlab.sl.nsw.gov.au/art-index/images/artists/${artist.thumbnailFile}`;\n    metaImageAlt = `Art Index: image of artist ${artist.firstName} ${artist.lastName}`;\n    metaImageWidth = 600; // ? not true, but they are square...\n    metaImageHeight = 600;\n  } else if (pathname === config.work.pathname && work.imageUrl) {\n    metaImageUrl = work.imageUrl;\n    metaImageAlt = `Art Index: image of '${work.title}' by ${work.artistFirstName} ${work.artistLastName}`;\n  } else {\n    metaImageUrl =\n      'https://dxlab.sl.nsw.gov.au/art-index/images/art-index-image.jpg';\n    metaImageAlt = `Art Index - a DX Lab experiment`;\n    metaImageWidth = 1200;\n    metaImageHeight = 627;\n  }\n\n  return (\n    <ArtIndexProvider>\n      <ArtIndexApp\n        title={title}\n        metaDescription={metaDescription}\n        metaImageUrl={metaImageUrl}\n        metaImageAlt={metaImageAlt}\n        metaImageWidth={metaImageWidth}\n        metaImageHeight={metaImageHeight}\n      >\n        {pathname === config.home.pathname && <ArtIndexHome />}\n        {pathname === config.search.pathname && <ArtIndexSearch />}\n        {pathname === config.artist.pathname && (\n          <ArtIndexArtist artist={artist} />\n        )}\n        {pathname === config.exhibition.pathname && (\n          <ArtIndexExhibition exhibition={exhibition} />\n        )}\n        {pathname === config.work.pathname && <ArtIndexWork work={work} />}\n        {pathname === config.charts.pathname && <ArtIndexCharts />}\n        {pathname === config.explore.pathname && <ArtIndexExplore />}\n      </ArtIndexApp>\n    </ArtIndexProvider>\n  );\n};\n\nArtIndexPage.getInitialProps = async ({\n  req,\n  pathname,\n  query,\n}: {\n  pathname: PathnameList;\n} & NextPageContext): Promise<Props> => {\n  const isServer = Boolean(req);\n  const host = isServer ? `http://${req.headers.host}` : '';\n\n  if (pathname === config.work.pathname) {\n    // TODO: Work out https or http\n    const result = await axios.get(`${host}/api/art-index/works/${query.id}`);\n    const work = result.data;\n\n    return {\n      work,\n      pathname,\n    };\n  }\n\n  if (pathname === config.artist.pathname) {\n    // TODO: Work out https or http\n    const result = await axios.get(`${host}/api/art-index/artists/${query.id}`);\n    const artist = result.data;\n\n    return {\n      artist,\n      pathname,\n    };\n  }\n\n  if (pathname === config.exhibition.pathname) {\n    // TODO: Work out https or http\n    const result = await axios.get(\n      `${host}/api/art-index/exhibitions/${query.id}`,\n    );\n    const exhibition = result.data;\n\n    return {\n      exhibition,\n      pathname,\n    };\n  }\n\n  return {\n    pathname,\n    query,\n  };\n};\n\nexport default ArtIndexPage;\n"]},"metadata":{},"sourceType":"module"}