{"ast":null,"code":"var _jsxFileName = \"/Users/luked/Documents/slnsw/dxlab-art-index/components/ArtIndexFormatBubbleChart/ArtIndexFormatBubbleChart.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport BubbleChart from '../BubbleChart';\nimport css from './ArtIndexFormatBubbleChart.module.scss';\n\nconst ArtIndexFormatBubbleChart = ({\n  data,\n  className,\n  height = 600,\n  smallCircleLimit = 11,\n  letterWidth = 4,\n  onBubbleClick\n}) => {\n  const [hoverIndex, setHoverIndex] = React.useState(null);\n  return __jsx(BubbleChart, {\n    data: data.slice(0, 30).map(d => {\n      return {\n        name: d.item || 'Unknown',\n        value: d.count\n      };\n    }),\n    height: height,\n    className: [css.artIndexFormatBubbleChart, className || ''].join(' '),\n    renderBubble: (d, i) => {\n      // TODO: Consider `provider` API like React Select\n      return {\n        append: 'g',\n        transform: `translate(${d.x},${d.y})`,\n        duration: 1000,\n        children: [{\n          append: 'circle',\n          data: d.data,\n          r: {\n            enter: d.r,\n            exit: 0\n          },\n          fill: 'var(--colour-primary)',\n          duration: 1000,\n          onClick: typeof onBubbleClick === 'function' && onBubbleClick,\n          cursor: typeof onBubbleClick === 'function' ? 'pointer' : 'default',\n          onMouseOver: () => {\n            setHoverIndex(i);\n          },\n          onMouseOut: () => {\n            setHoverIndex(null);\n          }\n        }]\n      };\n    },\n    renderLabel: (d, i) => {\n      const isHovered = i === hoverIndex;\n      const labelText = d.data.name || 'Unknown';\n      const displayNumber = d.data.value.toString().length * letterWidth < d.r;\n      const shortenedLabelText = d.r > smallCircleLimit ? // ? `${labelText.slice(0, d.data.value.toString(10).length - 1)}…`\n      `${labelText.slice(0, Math.floor(d.r / letterWidth) - 1)}…` : ' '; // have to put an actual space here, not empty string or else text never goes away\n      // TODO: Consider `provider` API like React Select\n\n      return {\n        append: 'g',\n        transform: `translate(${d.x},${d.y})`,\n        duration: 1000,\n        children: [{\n          append: 'text',\n          key: d.data.name,\n          fill: 'var(--colour-white)',\n          fontWeight: 600,\n          text: isHovered || labelText.length * letterWidth < d.r ? labelText : shortenedLabelText,\n          opacity: {\n            enter: 1,\n            exit: 0\n          },\n          duration: 1000,\n          y: '-0.2em'\n        }, {\n          append: 'text',\n          fill: 'var(--colour-white)',\n          text: isHovered || displayNumber && d.r > smallCircleLimit ? d.data.value : ' ',\n          // have to put an actual space here, not empty string or else text never goes away\n          opacity: 0.8,\n          y: '0.9em'\n        }]\n      };\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default ArtIndexFormatBubbleChart;","map":{"version":3,"sources":["/Users/luked/Documents/slnsw/dxlab-art-index/components/ArtIndexFormatBubbleChart/ArtIndexFormatBubbleChart.tsx"],"names":["React","BubbleChart","css","ArtIndexFormatBubbleChart","data","className","height","smallCircleLimit","letterWidth","onBubbleClick","hoverIndex","setHoverIndex","useState","slice","map","d","name","item","value","count","artIndexFormatBubbleChart","join","i","append","transform","x","y","duration","children","r","enter","exit","fill","onClick","cursor","onMouseOver","onMouseOut","isHovered","labelText","displayNumber","toString","length","shortenedLabelText","Math","floor","key","fontWeight","text","opacity"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport BubbleChart from '../BubbleChart';\n\nimport css from './ArtIndexFormatBubbleChart.module.scss';\n\ntype Props = {\n  data?: {\n    item: string;\n    count: number;\n  }[];\n  height?: number;\n  smallCircleLimit?: number;\n  letterWidth?: number;\n  onBubbleClick?: Function;\n  className?: string;\n};\n\nconst ArtIndexFormatBubbleChart: React.FC<Props> = ({\n  data,\n  className,\n  height = 600,\n  smallCircleLimit = 11,\n  letterWidth = 4,\n  onBubbleClick,\n}) => {\n  const [hoverIndex, setHoverIndex] = React.useState(null);\n  return (\n    <BubbleChart\n      data={data.slice(0, 30).map((d) => {\n        return {\n          name: d.item || 'Unknown',\n          value: d.count,\n        };\n      })}\n      height={height}\n      className={[css.artIndexFormatBubbleChart, className || ''].join(' ')}\n      renderBubble={(d, i) => {\n        // TODO: Consider `provider` API like React Select\n        return {\n          append: 'g',\n          transform: `translate(${d.x},${d.y})`,\n          duration: 1000,\n          children: [\n            {\n              append: 'circle',\n              data: d.data,\n              r: { enter: d.r, exit: 0 },\n              fill: 'var(--colour-primary)',\n              duration: 1000,\n              onClick: typeof onBubbleClick === 'function' && onBubbleClick,\n              cursor:\n                typeof onBubbleClick === 'function' ? 'pointer' : 'default',\n              onMouseOver: () => {\n                setHoverIndex(i);\n              },\n              onMouseOut: () => {\n                setHoverIndex(null);\n              },\n            },\n          ],\n        };\n      }}\n      renderLabel={(d, i) => {\n        const isHovered = i === hoverIndex;\n\n        const labelText = d.data.name || 'Unknown';\n\n        const displayNumber =\n          d.data.value.toString().length * letterWidth < d.r;\n\n        const shortenedLabelText =\n          d.r > smallCircleLimit\n            ? // ? `${labelText.slice(0, d.data.value.toString(10).length - 1)}…`\n              `${labelText.slice(0, Math.floor(d.r / letterWidth) - 1)}…`\n            : ' '; // have to put an actual space here, not empty string or else text never goes away\n        // TODO: Consider `provider` API like React Select\n        return {\n          append: 'g',\n          transform: `translate(${d.x},${d.y})`,\n          duration: 1000,\n          children: [\n            {\n              append: 'text',\n              key: d.data.name,\n              fill: 'var(--colour-white)',\n              fontWeight: 600,\n              text:\n                isHovered || labelText.length * letterWidth < d.r\n                  ? labelText\n                  : shortenedLabelText,\n              opacity: { enter: 1, exit: 0 },\n              duration: 1000,\n              y: '-0.2em',\n            },\n            {\n              append: 'text',\n              fill: 'var(--colour-white)',\n              text:\n                isHovered || (displayNumber && d.r > smallCircleLimit)\n                  ? d.data.value\n                  : ' ', // have to put an actual space here, not empty string or else text never goes away\n              opacity: 0.8,\n              y: '0.9em',\n            },\n          ],\n        };\n      }}\n    />\n  );\n};\n\nexport default ArtIndexFormatBubbleChart;\n"]},"metadata":{},"sourceType":"module"}