{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/luked/Documents/slnsw/dxlab-art-index/components/ArtIndexCharts/ArtIndexCharts.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport dynamic from 'next/dynamic';\nimport LoaderText from '../LoaderText';\nimport BubbleChart from '../BubbleChart';\nimport css from './ArtIndexCharts.module.scss';\nvar BarChart = dynamic(_c = function _c() {\n  return import('../BarChart');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../BarChart')];\n    },\n    modules: ['../BarChart']\n  }\n});\n_c2 = BarChart;\n\nvar ArtIndexApp = function ArtIndexApp(_ref) {\n  _s();\n\n  var _ref$id = _ref.id,\n      id = _ref$id === void 0 ? 'art-index-app' : _ref$id,\n      className = _ref.className,\n      restProps = _objectWithoutProperties(_ref, [\"id\", \"className\"]);\n\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _React$useState3 = React.useState({\n    yearData: [],\n    formOfWork: [],\n    exhibitionName: [],\n    creator: [],\n    creator2: []\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      data = _React$useState4[0],\n      setData = _React$useState4[1];\n\n  React.useEffect(function () {\n    fetch('/art-index/data/works-old.json').then(function (r) {\n      return r.json();\n    }).then(function (d) {\n      setData(processData(d));\n      setLoading(false);\n    })[\"catch\"](function (error) {\n      console.log(error);\n    });\n  }, []);\n  return __jsx(\"div\", _extends({\n    id: id,\n    className: [css.artIndexApp, className || ''].join(' ')\n  }, restProps, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }), __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, \"Australian Art Exhibiton Catalogue Index 1845-1900\"), loading && __jsx(LoaderText, {\n    style: {\n      textAlign: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, \"Artist names (first 150 sorted by name)\"), __jsx(BarChart, {\n    data: data.creator.slice(0, 150).map(function (d) {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 1500,\n    direction: 'horizontal',\n    showValues: true // rotateXAxis={true}\n    ,\n    margin: {\n      top: 20,\n      left: 200,\n      right: 10,\n      bottom: 80\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, \"Artist names (firt 150 sorted by num of entries)\"), __jsx(BarChart, {\n    data: data.creator2.slice(0, 150).map(function (d) {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 1500,\n    direction: 'horizontal',\n    showValues: true // rotateXAxis={true}\n    ,\n    margin: {\n      top: 20,\n      left: 200,\n      right: 10,\n      bottom: 80\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, \"Exhibtion names\"), __jsx(BarChart, {\n    data: data.exhibitionName.map(function (d) {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 1500,\n    direction: 'horizontal',\n    showValues: true // rotateXAxis={true}\n    ,\n    margin: {\n      top: 20,\n      left: 400,\n      right: 10,\n      bottom: 80\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, \"Works exhibited by year\"), __jsx(BarChart, {\n    data: data.yearData.map(function (d) {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 300,\n    direction: 'vertical',\n    showValues: true,\n    rotateXAxis: true,\n    margin: {\n      top: 20,\n      left: 40,\n      right: 10,\n      bottom: 80\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, \"Forms of work\"), __jsx(BubbleChart, {\n    data: data.formOfWork.slice(0, 30).map(function (d) {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 800 // className={css.popularWordsChart}\n    ,\n    renderBubble: function renderBubble(d) {\n      // TODO: Consider `provider` API like React Select\n      return {\n        append: 'g',\n        transform: \"translate(\".concat(d.x, \",\").concat(d.y, \")\"),\n        duration: 1000,\n        children: [{\n          append: 'circle',\n          data: d.data,\n          r: {\n            enter: d.r,\n            exit: 0\n          },\n          fill: 'var(--colour-primary)',\n          duration: 1000 // onClick: (_, circleData) =>\n          //   Router.push(`/diary-files/search?q=${circleData.data.name}`),\n\n        }, {\n          append: 'text',\n          key: d.data.name,\n          fill: 'var(--colour-white)',\n          fontWeight: 600,\n          text: d.data.name,\n          opacity: {\n            enter: 1,\n            exit: 0\n          },\n          duration: 1000,\n          y: '-0.2em' // class: `${css.hoverView}`,\n          // onMouseOver:\n\n        }, {\n          append: 'text',\n          fill: 'var(--colour-white)',\n          text: d.data.value,\n          opacity: 0.8,\n          y: '0.9em'\n        }]\n      };\n    } // onBubbleClick={(_, d) => {\n    //   Router.push(`/diary-files/search?q=${d.data.name}`);\n    // }}\n    ,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }), __jsx(BarChart, {\n    data: data.formOfWork.map(function (d) {\n      return {\n        name: d.item,\n        value: d.count\n      };\n    }),\n    height: 3000,\n    direction: 'horizontal',\n    showValues: true // rotateXAxis={true}\n    ,\n    margin: {\n      top: 20,\n      left: 150,\n      right: 10,\n      bottom: 80\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }));\n};\n\n_s(ArtIndexApp, \"RR6PJcVHTAl3vcN1Nnx1+8eLmr0=\");\n\n_c3 = ArtIndexApp;\n\nvar arrayToCounts = function arrayToCounts(a) {\n  if (!a) return null;\n  var counts = Object.create(null);\n  a.forEach(function (e) {\n    counts[e] = counts[e] ? counts[e] + 1 : 1;\n  });\n  var out = [];\n  Object.keys(counts).forEach(function (count) {\n    out.push({\n      item: count,\n      count: counts[count]\n    });\n  });\n  return out;\n};\n\nvar processData = function processData(d) {\n  // year Data\n  var years = d.map(function (e) {\n    return e.ExhibitionYear;\n  });\n  var yearData = arrayToCounts(years); // works data\n\n  var works = d.map(function (e) {\n    var form;\n\n    if (!e.FormOfWork) {\n      if (e.Medium.toLowerCase() === 'oil' || e.Medium.toLowerCase() === 'watercolour') {\n        form = 'painting';\n      } else if (e.Medium.toLowerCase() === 'crayon') {\n        form = 'drawing';\n      } else {\n        form = '';\n      }\n    } else {\n      form = e.FormOfWork;\n    }\n\n    return \"\".concat(e.Medium).concat(e.Medium ? ' ' : '').concat(form).toLowerCase();\n  });\n  var formOfWork = arrayToCounts(works); // exhib name data\n\n  var exhibNames = d.map(function (e) {\n    return e.ExhibitionName;\n  });\n  var exhibitionName = arrayToCounts(exhibNames).sort(function (a, b) {\n    var s = b.item < a.item ? 1 : 0;\n    return b.item > a.item ? -1 : s;\n  });\n  var creators = d.map(function (e) {\n    return \"\".concat(e.CreatorSurname).concat(e.CreatorForname ? ', ' : '').concat(e.CreatorForname).toLowerCase();\n  });\n  var creator = arrayToCounts(creators).filter(function (c) {\n    return c.item.length > 0;\n  }).sort(function (a, b) {\n    var s = b.item < a.item ? 1 : 0;\n    return b.item > a.item ? -1 : s;\n  });\n  var creators2 = d.map(function (e) {\n    return \"\".concat(e.CreatorSurname).concat(e.CreatorForname ? ', ' : '').concat(e.CreatorForname).toLowerCase();\n  });\n  var creator2 = arrayToCounts(creators2).filter(function (c) {\n    return c.item.length > 0;\n  }).sort(function (a, b) {\n    return b.count - a.count;\n  });\n  return {\n    yearData: yearData,\n    formOfWork: formOfWork,\n    exhibitionName: exhibitionName,\n    creator: creator,\n    creator2: creator2\n  }; // console.log(creator.length);\n  // setData();\n};\n\nexport default ArtIndexApp;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"BarChart$dynamic\");\n$RefreshReg$(_c2, \"BarChart\");\n$RefreshReg$(_c3, \"ArtIndexApp\");","map":{"version":3,"sources":["/Users/luked/Documents/slnsw/dxlab-art-index/components/ArtIndexCharts/ArtIndexCharts.tsx"],"names":["React","dynamic","LoaderText","BubbleChart","css","BarChart","ArtIndexApp","id","className","restProps","useState","loading","setLoading","yearData","formOfWork","exhibitionName","creator","creator2","data","setData","useEffect","fetch","then","r","json","d","processData","error","console","log","artIndexApp","join","textAlign","slice","map","name","item","value","count","top","left","right","bottom","append","transform","x","y","duration","children","enter","exit","fill","key","fontWeight","text","opacity","arrayToCounts","a","counts","Object","create","forEach","e","out","keys","push","years","ExhibitionYear","works","form","FormOfWork","Medium","toLowerCase","exhibNames","ExhibitionName","sort","b","s","creators","CreatorSurname","CreatorForname","filter","c","length","creators2"],"mappings":"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","sourcesContent":["import React from 'react';\nimport dynamic from 'next/dynamic';\n\nimport LoaderText from '../LoaderText';\nimport BubbleChart from '../BubbleChart';\n\nimport css from './ArtIndexCharts.module.scss';\n\nconst BarChart = dynamic(() => import('../BarChart'));\n\ntype Props = {\n  id?: string;\n  className?: string;\n};\n\nconst ArtIndexApp: React.FC<Props> = ({\n  id = 'art-index-app',\n  className,\n  ...restProps\n}) => {\n  const [loading, setLoading] = React.useState(true);\n  const [data, setData] = React.useState({\n    yearData: [],\n    formOfWork: [],\n    exhibitionName: [],\n    creator: [],\n    creator2: [],\n  });\n\n  React.useEffect(() => {\n    fetch('/art-index/data/works-old.json')\n      .then((r) => r.json())\n      .then((d) => {\n        setData(processData(d));\n        setLoading(false);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  return (\n    <div\n      id={id}\n      className={[css.artIndexApp, className || ''].join(' ')}\n      {...restProps}\n    >\n      <h1>Australian Art Exhibiton Catalogue Index 1845-1900</h1>\n      {loading && (\n        <LoaderText\n          style={{\n            textAlign: 'center',\n          }}\n        />\n      )}\n\n      <p>Artist names (first 150 sorted by name)</p>\n      <BarChart\n        data={data.creator.slice(0, 150).map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={1500}\n        direction={'horizontal'}\n        showValues={true}\n        // rotateXAxis={true}\n        margin={{ top: 20, left: 200, right: 10, bottom: 80 }}\n      />\n\n      <p>Artist names (firt 150 sorted by num of entries)</p>\n      <BarChart\n        data={data.creator2.slice(0, 150).map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={1500}\n        direction={'horizontal'}\n        showValues={true}\n        // rotateXAxis={true}\n        margin={{ top: 20, left: 200, right: 10, bottom: 80 }}\n      />\n\n      <p>Exhibtion names</p>\n      <BarChart\n        data={data.exhibitionName.map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={1500}\n        direction={'horizontal'}\n        showValues={true}\n        // rotateXAxis={true}\n        margin={{ top: 20, left: 400, right: 10, bottom: 80 }}\n      />\n\n      <p>Works exhibited by year</p>\n      <BarChart\n        data={data.yearData.map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={300}\n        direction={'vertical'}\n        showValues={true}\n        rotateXAxis={true}\n        margin={{ top: 20, left: 40, right: 10, bottom: 80 }}\n      />\n\n      <p>Forms of work</p>\n\n      <BubbleChart\n        data={data.formOfWork.slice(0, 30).map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={800}\n        // className={css.popularWordsChart}\n        renderBubble={(d) => {\n          // TODO: Consider `provider` API like React Select\n          return {\n            append: 'g',\n            transform: `translate(${d.x},${d.y})`,\n            duration: 1000,\n            children: [\n              {\n                append: 'circle',\n                data: d.data,\n                r: { enter: d.r, exit: 0 },\n                fill: 'var(--colour-primary)',\n                duration: 1000,\n                // onClick: (_, circleData) =>\n                //   Router.push(`/diary-files/search?q=${circleData.data.name}`),\n              },\n              {\n                append: 'text',\n                key: d.data.name,\n                fill: 'var(--colour-white)',\n                fontWeight: 600,\n                text: d.data.name,\n                opacity: { enter: 1, exit: 0 },\n                duration: 1000,\n                y: '-0.2em',\n                // class: `${css.hoverView}`,\n                // onMouseOver:\n              },\n              {\n                append: 'text',\n                fill: 'var(--colour-white)',\n                text: d.data.value,\n                opacity: 0.8,\n                y: '0.9em',\n              },\n            ],\n          };\n        }}\n        // onBubbleClick={(_, d) => {\n        //   Router.push(`/diary-files/search?q=${d.data.name}`);\n        // }}\n      />\n\n      <BarChart\n        data={data.formOfWork.map((d) => {\n          return {\n            name: d.item,\n            value: d.count,\n          };\n        })}\n        height={3000}\n        direction={'horizontal'}\n        showValues={true}\n        // rotateXAxis={true}\n        margin={{ top: 20, left: 150, right: 10, bottom: 80 }}\n      />\n    </div>\n  );\n};\n\nconst arrayToCounts = (a) => {\n  if (!a) return null;\n  const counts = Object.create(null);\n  a.forEach((e) => {\n    counts[e] = counts[e] ? counts[e] + 1 : 1;\n  });\n  const out = [];\n  Object.keys(counts).forEach((count) => {\n    out.push({ item: count, count: counts[count] });\n  });\n  return out;\n};\n\nconst processData = (d) => {\n  // year Data\n  const years = d.map((e) => {\n    return e.ExhibitionYear;\n  });\n  const yearData = arrayToCounts(years);\n\n  // works data\n  const works = d.map((e) => {\n    let form;\n    if (!e.FormOfWork) {\n      if (\n        e.Medium.toLowerCase() === 'oil' ||\n        e.Medium.toLowerCase() === 'watercolour'\n      ) {\n        form = 'painting';\n      } else if (e.Medium.toLowerCase() === 'crayon') {\n        form = 'drawing';\n      } else {\n        form = '';\n      }\n    } else {\n      form = e.FormOfWork;\n    }\n    return `${e.Medium}${e.Medium ? ' ' : ''}${form}`.toLowerCase();\n  });\n  const formOfWork = arrayToCounts(works);\n  // exhib name data\n  const exhibNames = d.map((e) => {\n    return e.ExhibitionName;\n  });\n  const exhibitionName = arrayToCounts(exhibNames).sort((a, b) => {\n    const s = b.item < a.item ? 1 : 0;\n    return b.item > a.item ? -1 : s;\n  });\n\n  const creators = d.map((e) => {\n    return `${e.CreatorSurname}${e.CreatorForname ? ', ' : ''}${\n      e.CreatorForname\n    }`.toLowerCase();\n  });\n  const creator = arrayToCounts(creators)\n    .filter((c) => {\n      return c.item.length > 0;\n    })\n    .sort((a, b) => {\n      const s = b.item < a.item ? 1 : 0;\n      return b.item > a.item ? -1 : s;\n    });\n\n  const creators2 = d.map((e) => {\n    return `${e.CreatorSurname}${e.CreatorForname ? ', ' : ''}${\n      e.CreatorForname\n    }`.toLowerCase();\n  });\n  const creator2 = arrayToCounts(creators2)\n    .filter((c) => {\n      return c.item.length > 0;\n    })\n    .sort((a, b) => {\n      return b.count - a.count;\n    });\n\n  return { yearData, formOfWork, exhibitionName, creator, creator2 };\n\n  // console.log(creator.length);\n  // setData();\n};\n\nexport default ArtIndexApp;\n"]},"metadata":{},"sourceType":"module"}