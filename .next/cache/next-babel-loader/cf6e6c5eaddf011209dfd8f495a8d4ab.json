{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/luked/Documents/slnsw/dxlab-art-index/components/LineChart/LineChart.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport * as d3 from 'd3';\nimport render from 'd3-render';\nimport useDimensions from '../../lib/hooks/use-dimensions';\nimport css from './LineChart.module.scss';\nvar defaultMargin = {\n  top: 10,\n  left: 40,\n  right: 10,\n  bottom: 20\n};\n\nvar LineChart = function LineChart(_ref) {\n  _s();\n\n  var _ref$data = _ref.data,\n      data = _ref$data === void 0 ? [] : _ref$data,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 200 : _ref$height,\n      _ref$margin = _ref.margin,\n      newMargin = _ref$margin === void 0 ? defaultMargin : _ref$margin,\n      _ref$direction = _ref.direction,\n      direction = _ref$direction === void 0 ? 'vertical' : _ref$direction,\n      _ref$rotateXAxis = _ref.rotateXAxis,\n      rotateXAxis = _ref$rotateXAxis === void 0 ? false : _ref$rotateXAxis,\n      _ref$showValues = _ref.showValues,\n      showValues = _ref$showValues === void 0 ? false : _ref$showValues,\n      renderLine = _ref.renderLine,\n      _ref$id = _ref.id,\n      id = _ref$id === void 0 ? 'bar-chart' : _ref$id,\n      className = _ref.className,\n      restProps = _objectWithoutProperties(_ref, [\"data\", \"height\", \"margin\", \"direction\", \"rotateXAxis\", \"showValues\", \"renderLine\", \"id\", \"className\"]);\n\n  // const [hoverIndex, setHoverIndex] = React.useState(null);\n  var _useDimensions = useDimensions(),\n      _useDimensions2 = _slicedToArray(_useDimensions, 3),\n      svgRef = _useDimensions2[0],\n      dimensions = _useDimensions2[1],\n      svgNode = _useDimensions2[2];\n\n  var width = dimensions.width;\n\n  var margin = _objectSpread(_objectSpread({}, defaultMargin), newMargin); // console.log(data);\n\n\n  React.useEffect(function () {\n    if (svgNode && data.length > 0 && width) {\n      var x;\n      var y;\n      var xAxis;\n      var yAxis;\n      var line;\n      var maximum = d3.max(data, function (series) {\n        return d3.max(series, function (d) {\n          return d.value;\n        });\n      });\n      var svg = d3.select(svgNode);\n\n      if (direction === 'vertical') {\n        // x = d3\n        //   .scaleBand()\n        //   .domain(d3.range(data.length))\n        //   .range([margin.left, width - margin.right])\n        //   .padding(0.1);\n        x = d3.scaleUtc() // .domain(d3.extent(data, (d) => d.date))\n        .domain([d3.min(data, function (series) {\n          return d3.min(series, function (d) {\n            return d.date;\n          });\n        }), d3.max(data, function (series) {\n          return d3.max(series, function (d) {\n            return d.date;\n          });\n        })]).range([margin.left, width - margin.right]);\n        y = d3.scaleLinear().domain([0, maximum]).nice().range([height - margin.bottom, margin.top]);\n        line = d3.line().defined(function (d) {\n          return !Number.isNaN(d.date);\n        }).x(function (d) {\n          return x(d.date);\n        }).y(function (d) {\n          return y(d.value);\n        });\n        xAxis = d3.axisBottom(x).ticks(10).tickFormat(function (d) {\n          return d.getFullYear();\n        }).tickSizeOuter(0);\n\n        yAxis = function yAxis(g) {\n          return g.attr('transform', \"translate(\".concat(margin.left + 1, \",0)\")).call(d3.axisLeft(y).ticks(null, 's')).call(function (selection) {\n            return selection.select('.domain').remove();\n          });\n        };\n\n        render(svg, [{\n          append: 'g',\n          children: data.map(function (series, i) {\n            return _objectSpread({\n              append: 'path',\n              fill: 'none',\n              stroke: 'var(--colour-primary)',\n              strokeWidth: 1.5,\n              duration: 1000,\n              d: line(series)\n            }, typeof renderLine === 'function' ? renderLine(series, i) : {});\n          })\n        }, {\n          append: 'g',\n          \"class\": 'x-axis',\n          // key: width,\n          key: Date.now(),\n          transform: \"translate(0, \".concat(height - margin.bottom, \")\"),\n          call: xAxis\n        }, {\n          append: 'g',\n          call: yAxis\n        }]);\n\n        if (rotateXAxis) {\n          d3.selectAll(\"#\".concat(id, \" .x-axis text\")).style('text-anchor', 'end').attr('dx', '-1em').attr('dy', '-.5em').attr('transform', 'rotate(-90)');\n        }\n      } else {\n        y = d3.scaleOrdinal().domain(data.map(function (d) {\n          return d.name;\n        })).range(data.map(function (_, i) {\n          return (height - margin.top - margin.bottom) / data.length * i + margin.top;\n        }));\n        x = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n          return d.value;\n        })]).range([margin.left, width - margin.right]);\n        xAxis = d3.axisBottom(x);\n\n        yAxis = function yAxis(g) {\n          return g.attr('transform', \"translate(\".concat(margin.left, \",0)\")).call(d3.axisLeft(y).ticks(null, 's'));\n        };\n\n        render(svg, [{\n          append: 'g',\n          fill: 'var(--colour-primary)',\n          children: data.map(function (d, i) {\n            return {\n              append: 'rect',\n              x: margin.left + 1,\n              y: (height - margin.top - margin.bottom) / data.length * i + margin.top / 2,\n              width: d.value / maximum * (width - margin.left - margin.right),\n              height: (height - margin.top - margin.bottom) / data.length - 1\n            };\n          })\n        }, {\n          append: 'g',\n          key: width,\n          transform: \"translate(0, \".concat(height - margin.bottom, \")\"),\n          call: xAxis\n        }, {\n          append: 'g',\n          call: yAxis\n        }]);\n      }\n    }\n  }, [svgNode, data, width, height, margin, id, showValues, direction, rotateXAxis, // hoverIndex,\n  renderLine]);\n  return __jsx(\"svg\", _extends({\n    ref: svgRef,\n    width: width,\n    height: height,\n    id: id,\n    className: [css.lineChart, className || ''].join(' ')\n  }, restProps, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 5\n    }\n  }));\n};\n\n_s(LineChart, \"uxm/rFxBZPSJa9IMhvwijg0RKVg=\", false, function () {\n  return [useDimensions];\n});\n\n_c = LineChart;\nLineChart.propTypes = {\n  className: PropTypes.string\n};\nexport default LineChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"LineChart\");","map":{"version":3,"sources":["/Users/luked/Documents/slnsw/dxlab-art-index/components/LineChart/LineChart.tsx"],"names":["React","PropTypes","d3","render","useDimensions","css","defaultMargin","top","left","right","bottom","LineChart","data","height","margin","newMargin","direction","rotateXAxis","showValues","renderLine","id","className","restProps","svgRef","dimensions","svgNode","width","useEffect","length","x","y","xAxis","yAxis","line","maximum","max","series","d","value","svg","select","scaleUtc","domain","min","date","range","scaleLinear","nice","defined","Number","isNaN","axisBottom","ticks","tickFormat","getFullYear","tickSizeOuter","g","attr","call","axisLeft","selection","remove","append","children","map","i","fill","stroke","strokeWidth","duration","key","Date","now","transform","selectAll","style","scaleOrdinal","name","_","lineChart","join","propTypes","string"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport * as d3 from 'd3';\nimport render from 'd3-render';\n\nimport useDimensions from '../../lib/hooks/use-dimensions';\n\nimport css from './LineChart.module.scss';\n\ntype Props = {\n  data: {\n    date: Date;\n    value: number;\n  }[][];\n  height?: number;\n  margin?: {\n    top?: number;\n    left?: number;\n    right?: number;\n    bottom?: number;\n  };\n  direction?: 'vertical' | 'horizontal';\n  rotateXAxis?: boolean;\n  showValues?: boolean;\n  renderLine?: Function;\n  id?: string;\n  className?: string;\n};\n\nconst defaultMargin = {\n  top: 10,\n  left: 40,\n  right: 10,\n  bottom: 20,\n};\n\nconst LineChart: React.FC<Props> = ({\n  data = [],\n  height = 200,\n  margin: newMargin = defaultMargin,\n  direction = 'vertical',\n  rotateXAxis = false,\n  showValues = false,\n  renderLine,\n  id = 'bar-chart',\n  className,\n  ...restProps\n}) => {\n  // const [hoverIndex, setHoverIndex] = React.useState(null);\n  const [svgRef, dimensions, svgNode] = useDimensions();\n  const { width } = dimensions;\n  const margin = {\n    ...defaultMargin,\n    ...newMargin,\n  };\n\n  // console.log(data);\n\n  React.useEffect(() => {\n    if (svgNode && data.length > 0 && width) {\n      let x;\n      let y;\n      let xAxis;\n      let yAxis;\n      let line;\n      const maximum = d3.max(data, (series) => d3.max(series, (d) => d.value));\n      const svg = d3.select(svgNode);\n\n      if (direction === 'vertical') {\n        // x = d3\n        //   .scaleBand()\n        //   .domain(d3.range(data.length))\n        //   .range([margin.left, width - margin.right])\n        //   .padding(0.1);\n\n        x = d3\n          .scaleUtc()\n          // .domain(d3.extent(data, (d) => d.date))\n          .domain([\n            d3.min(data, (series) => d3.min(series, (d) => d.date)),\n            d3.max(data, (series) => d3.max(series, (d) => d.date)),\n          ])\n          .range([margin.left, width - margin.right]);\n\n        y = d3\n          .scaleLinear()\n          .domain([0, maximum])\n          .nice()\n          .range([height - margin.bottom, margin.top]);\n\n        line = d3\n          .line()\n          .defined((d) => !Number.isNaN(d.date))\n          .x((d) => {\n            return x(d.date);\n          })\n          .y((d) => {\n            return y(d.value);\n          });\n\n        xAxis = d3\n          .axisBottom(x)\n          .ticks(10)\n          .tickFormat((d) => {\n            return d.getFullYear();\n          })\n          .tickSizeOuter(0);\n\n        yAxis = (g) =>\n          g\n            .attr('transform', `translate(${margin.left + 1},0)`)\n            .call(d3.axisLeft(y).ticks(null, 's'))\n            .call((selection) => selection.select('.domain').remove());\n\n        render(svg, [\n          {\n            append: 'g',\n            children: data.map((series, i) => {\n              return {\n                append: 'path',\n                fill: 'none',\n                stroke: 'var(--colour-primary)',\n                strokeWidth: 1.5,\n                duration: 1000,\n                d: line(series),\n                ...(typeof renderLine === 'function'\n                  ? renderLine(series, i)\n                  : {}),\n              };\n            }),\n          },\n          {\n            append: 'g',\n            class: 'x-axis',\n            // key: width,\n            key: Date.now(),\n            transform: `translate(0, ${height - margin.bottom})`,\n            call: xAxis,\n          },\n          {\n            append: 'g',\n            call: yAxis,\n          },\n        ]);\n\n        if (rotateXAxis) {\n          d3.selectAll(`#${id} .x-axis text`)\n            .style('text-anchor', 'end')\n            .attr('dx', '-1em')\n            .attr('dy', '-.5em')\n            .attr('transform', 'rotate(-90)');\n        }\n      } else {\n        y = d3\n          .scaleOrdinal()\n          .domain(data.map((d) => d.name))\n          .range(\n            data.map(\n              (_, i) =>\n                ((height - margin.top - margin.bottom) / data.length) * i +\n                margin.top,\n            ),\n          );\n\n        x = d3\n          .scaleLinear()\n          .domain([0, d3.max(data, (d) => d.value)])\n          .range([margin.left, width - margin.right]);\n\n        xAxis = d3.axisBottom(x);\n\n        yAxis = (g) =>\n          g\n            .attr('transform', `translate(${margin.left},0)`)\n            .call(d3.axisLeft(y).ticks(null, 's'));\n\n        render(svg, [\n          {\n            append: 'g',\n            fill: 'var(--colour-primary)',\n            children: data.map((d, i) => {\n              return {\n                append: 'rect',\n                x: margin.left + 1,\n                y:\n                  ((height - margin.top - margin.bottom) / data.length) * i +\n                  margin.top / 2,\n                width:\n                  (d.value / maximum) * (width - margin.left - margin.right),\n                height: (height - margin.top - margin.bottom) / data.length - 1,\n              };\n            }),\n          },\n          {\n            append: 'g',\n            key: width,\n            transform: `translate(0, ${height - margin.bottom})`,\n            call: xAxis,\n          },\n          {\n            append: 'g',\n            call: yAxis,\n          },\n        ]);\n      }\n    }\n  }, [\n    svgNode,\n    data,\n    width,\n    height,\n    margin,\n    id,\n    showValues,\n    direction,\n    rotateXAxis,\n    // hoverIndex,\n    renderLine,\n  ]);\n\n  return (\n    <svg\n      ref={svgRef}\n      width={width}\n      height={height}\n      id={id}\n      className={[css.lineChart, className || ''].join(' ')}\n      {...restProps}\n    />\n  );\n};\n\nLineChart.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default LineChart;\n"]},"metadata":{},"sourceType":"module"}