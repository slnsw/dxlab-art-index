module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = require('../../../ssr-module-cache.js');
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		var threw = true;
/******/ 		try {
/******/ 			modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 			threw = false;
/******/ 		} finally {
/******/ 			if(threw) delete installedModules[moduleId];
/******/ 		}
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./pages/api/art-index/works.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./lib/create-fuse.ts":
/*!****************************!*\
  !*** ./lib/create-fuse.ts ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var fuse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fuse.js */ \"fuse.js\");\n/* harmony import */ var fuse_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fuse_js__WEBPACK_IMPORTED_MODULE_0__);\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n/**\n * Fuse JS search wrapper to enable async/await searches\n */\n\nconst createFuse = (data, options) => {\n  const fuse = new fuse_js__WEBPACK_IMPORTED_MODULE_0___default.a(data, options);\n  return _objectSpread(_objectSpread({}, fuse), {}, {\n    search: value => {\n      return new Promise(resolve => {\n        const results = fuse.search(value);\n        resolve(results);\n      });\n    }\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (createFuse);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvY3JlYXRlLWZ1c2UudHM/OGQ1OCJdLCJuYW1lcyI6WyJjcmVhdGVGdXNlIiwiZGF0YSIsIm9wdGlvbnMiLCJmdXNlIiwiRnVzZSIsInNlYXJjaCIsInZhbHVlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZXN1bHRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQSxNQUFNQSxVQUFVLEdBQUcsQ0FBSUMsSUFBSixFQUFlQyxPQUFmLEtBQWlEO0FBQ2xFLFFBQU1DLElBQUksR0FBRyxJQUFJQyw4Q0FBSixDQUFZSCxJQUFaLEVBQWtCQyxPQUFsQixDQUFiO0FBRUEseUNBQ0tDLElBREw7QUFFRUUsVUFBTSxFQUFHQyxLQUFELElBQWtEO0FBQ3hELGFBQU8sSUFBSUMsT0FBSixDQUFhQyxPQUFELElBQWE7QUFDOUIsY0FBTUMsT0FBTyxHQUFHTixJQUFJLENBQUNFLE1BQUwsQ0FBWUMsS0FBWixDQUFoQjtBQUVBRSxlQUFPLENBQUNDLE9BQUQsQ0FBUDtBQUNELE9BSk0sQ0FBUDtBQUtEO0FBUkg7QUFVRCxDQWJEOztBQWVlVCx5RUFBZiIsImZpbGUiOiIuL2xpYi9jcmVhdGUtZnVzZS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBGdXNlIGZyb20gJ2Z1c2UuanMnO1xuXG4vKipcbiAqIEZ1c2UgSlMgc2VhcmNoIHdyYXBwZXIgdG8gZW5hYmxlIGFzeW5jL2F3YWl0IHNlYXJjaGVzXG4gKi9cbmNvbnN0IGNyZWF0ZUZ1c2UgPSA8VD4oZGF0YTogVFtdLCBvcHRpb25zOiBGdXNlLklGdXNlT3B0aW9uczxUPikgPT4ge1xuICBjb25zdCBmdXNlID0gbmV3IEZ1c2U8VD4oZGF0YSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5mdXNlLFxuICAgIHNlYXJjaDogKHZhbHVlOiBzdHJpbmcpOiBQcm9taXNlPEZ1c2UuRnVzZVJlc3VsdDxUPltdPiA9PiB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGZ1c2Uuc2VhcmNoKHZhbHVlKTtcblxuICAgICAgICByZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUZ1c2U7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/create-fuse.ts\n");

/***/ }),

/***/ "./pages/api/art-index/works.ts":
/*!**************************************!*\
  !*** ./pages/api/art-index/works.ts ***!
  \**************************************/
/*! exports provided: getWorksResult, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getWorksResult\", function() { return getWorksResult; });\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3 */ \"d3\");\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(d3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-array */ \"d3-array\");\n/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(d3_array__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_create_fuse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/create-fuse */ \"./lib/create-fuse.ts\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nasync function getWorksResult(host, query = {}) {\n  const {\n    search,\n    formats,\n    artistIds,\n    exhibitionIds,\n    genders\n  } = query;\n  const offset = parseInt(query.offset, 10) || 0;\n  const limit = parseInt(query.limit, 10) || 20;\n  const exhibitionStartYear = query.exhibitionStartYear && parseInt(query.exhibitionStartYear, 10);\n  const exhibitionEndYear = query.exhibitionEndYear && parseInt(query.exhibitionEndYear, 10); // TODO: Work out https or http\n\n  const allWorks = await d3__WEBPACK_IMPORTED_MODULE_0__[\"csv\"](`http://${host}/art-index/data/works.csv`); // Filter works\n\n  let works = allWorks.filter(work => {\n    const selectedFormats = formats === null || formats === void 0 ? void 0 : formats.split(',');\n    const selectedArtistIds = artistIds === null || artistIds === void 0 ? void 0 : artistIds.split(',');\n    const selectedExhibitionIds = exhibitionIds === null || exhibitionIds === void 0 ? void 0 : exhibitionIds.split(',');\n    const selectedGenders = genders === null || genders === void 0 ? void 0 : genders.split(',');\n    const hasFormats = selectedFormats ? selectedFormats.includes(work.mediumFormat.toLowerCase()) : true;\n    const hasArtistIds = selectedArtistIds ? selectedArtistIds.includes(work.artistId) : true;\n    const hasExhibitionIds = selectedExhibitionIds ? selectedExhibitionIds.includes(work.exhibitionId) : true;\n    const isAfterStartYear = exhibitionStartYear ? parseInt(work.exhibitionYear, 10) >= exhibitionStartYear : true;\n    const isBeforeEndYear = exhibitionEndYear ? parseInt(work.exhibitionYear, 10) < exhibitionEndYear : true;\n    const artistGender = work.artistGender || 'unknown';\n    const hasGenders = selectedGenders ? selectedGenders.includes(artistGender) : true;\n    return hasFormats && hasArtistIds && hasExhibitionIds && isAfterStartYear && isBeforeEndYear && hasGenders;\n  }); // Run search over faceted works\n\n  if (search) {\n    const joinedWorks = works.map(w => {\n      return _objectSpread(_objectSpread({}, w), {}, {\n        searchKey: `${w.title} ${w.artistFirstName} ${w.artistLastName} ${w.exhibitionName} ${w.exhibitionPlace} ${w.mediumFormat} ${w.catalogueName}`\n      });\n    });\n    const fuse = Object(_lib_create_fuse__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(joinedWorks, {\n      includeScore: false,\n      threshold: 0.2,\n      useExtendedSearch: true,\n      distance: 1000,\n      keys: ['searchKey'] // keys: [\n      //   'title',\n      //   'artistFirstName',\n      //   'artistLastName',\n      //   'exhibitionName',\n      //   'exhibitionPlace',\n      //   'mediumFormat',\n      //   'catalogueName',\n      // ],\n\n    });\n    const searchWorks = await fuse.search(search);\n    works = searchWorks.map(result => result.item);\n  }\n\n  return {\n    worksTotal: works.length,\n    works: works.slice(offset, offset + limit),\n    facets: {\n      artists: rollup(works, 'artistId').map(([id, total]) => {\n        const work = works.find(w => w.artistId === id);\n        return {\n          id,\n          // value: `${work.artistFirstName} ${work.artistLastName}`,\n          value: {\n            firstName: work.artistFirstName,\n            lastName: work.artistLastName,\n            thumbnailFile: work.artistThumbnailFile,\n            gender: work.artistGender\n          },\n          total\n        };\n      }).sort((a, b) => b.total - a.total) // Ensure we don't get all artists!\n      .slice(0, 100),\n      exhibitions: rollup(works, 'exhibitionId').map(([id, total]) => {\n        const work = works.find(w => w.exhibitionId === id);\n        return {\n          id,\n          value: work.exhibitionName,\n          total\n        };\n      }).sort((a, b) => b.total - a.total),\n      formats: rollup(works, 'mediumFormat').map(([value, total]) => {\n        // TODO: Consider converting to underscore\n        return {\n          type: value.toLowerCase(),\n          value,\n          total\n        };\n      }).slice(0, 100),\n      genders: rollup(works, 'artistGender').map(([type, total]) => {\n        const newType = type || 'unknown';\n        return {\n          type: newType,\n          value: capitalise(newType),\n          total\n        };\n      }).sort((a, b) => b.total - a.total),\n      years: rollup(works, 'exhibitionYear').map(([id, total]) => {\n        return {\n          id,\n          value: id.toString(),\n          total\n        };\n      }).sort((a, b) => b.total - a.total)\n    }\n  };\n}\n\nfunction rollup(data, key) {\n  return Array.from(d3_array__WEBPACK_IMPORTED_MODULE_1__[\"rollup\"](data, v => v.length, d => d[key]));\n}\n\nconst capitalise = s => {\n  if (typeof s !== 'string') return '';\n  return s.charAt(0).toUpperCase() + s.slice(1);\n};\n\nasync function handler(req, res) {\n  const {\n    headers,\n    query\n  } = req;\n  const {\n    host\n  } = headers;\n  const result = await getWorksResult(host, query);\n  res.statusCode = 200;\n  res.setHeader('Content-Type', 'application/json');\n  res.end(JSON.stringify(result));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (handler);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9hcGkvYXJ0LWluZGV4L3dvcmtzLnRzP2I0M2EiXSwibmFtZXMiOlsiZ2V0V29ya3NSZXN1bHQiLCJob3N0IiwicXVlcnkiLCJzZWFyY2giLCJmb3JtYXRzIiwiYXJ0aXN0SWRzIiwiZXhoaWJpdGlvbklkcyIsImdlbmRlcnMiLCJvZmZzZXQiLCJwYXJzZUludCIsImxpbWl0IiwiZXhoaWJpdGlvblN0YXJ0WWVhciIsImV4aGliaXRpb25FbmRZZWFyIiwiYWxsV29ya3MiLCJkMyIsIndvcmtzIiwiZmlsdGVyIiwid29yayIsInNlbGVjdGVkRm9ybWF0cyIsInNwbGl0Iiwic2VsZWN0ZWRBcnRpc3RJZHMiLCJzZWxlY3RlZEV4aGliaXRpb25JZHMiLCJzZWxlY3RlZEdlbmRlcnMiLCJoYXNGb3JtYXRzIiwiaW5jbHVkZXMiLCJtZWRpdW1Gb3JtYXQiLCJ0b0xvd2VyQ2FzZSIsImhhc0FydGlzdElkcyIsImFydGlzdElkIiwiaGFzRXhoaWJpdGlvbklkcyIsImV4aGliaXRpb25JZCIsImlzQWZ0ZXJTdGFydFllYXIiLCJleGhpYml0aW9uWWVhciIsImlzQmVmb3JlRW5kWWVhciIsImFydGlzdEdlbmRlciIsImhhc0dlbmRlcnMiLCJqb2luZWRXb3JrcyIsIm1hcCIsInciLCJzZWFyY2hLZXkiLCJ0aXRsZSIsImFydGlzdEZpcnN0TmFtZSIsImFydGlzdExhc3ROYW1lIiwiZXhoaWJpdGlvbk5hbWUiLCJleGhpYml0aW9uUGxhY2UiLCJjYXRhbG9ndWVOYW1lIiwiZnVzZSIsImNyZWF0ZUZ1c2UiLCJpbmNsdWRlU2NvcmUiLCJ0aHJlc2hvbGQiLCJ1c2VFeHRlbmRlZFNlYXJjaCIsImRpc3RhbmNlIiwia2V5cyIsInNlYXJjaFdvcmtzIiwicmVzdWx0IiwiaXRlbSIsIndvcmtzVG90YWwiLCJsZW5ndGgiLCJzbGljZSIsImZhY2V0cyIsImFydGlzdHMiLCJyb2xsdXAiLCJpZCIsInRvdGFsIiwiZmluZCIsInZhbHVlIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJ0aHVtYm5haWxGaWxlIiwiYXJ0aXN0VGh1bWJuYWlsRmlsZSIsImdlbmRlciIsInNvcnQiLCJhIiwiYiIsImV4aGliaXRpb25zIiwidHlwZSIsIm5ld1R5cGUiLCJjYXBpdGFsaXNlIiwieWVhcnMiLCJ0b1N0cmluZyIsImRhdGEiLCJrZXkiLCJBcnJheSIsImZyb20iLCJkM0FycmF5IiwidiIsImQiLCJzIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiaGVhZGVycyIsInN0YXR1c0NvZGUiLCJzZXRIZWFkZXIiLCJlbmQiLCJKU09OIiwic3RyaW5naWZ5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQVFBO0FBRU8sZUFBZUEsY0FBZixDQUNMQyxJQURLLEVBRUxDLEtBQXVCLEdBQUcsRUFGckIsRUFHNEI7QUFDakMsUUFBTTtBQUFFQyxVQUFGO0FBQVVDLFdBQVY7QUFBbUJDLGFBQW5CO0FBQThCQyxpQkFBOUI7QUFBNkNDO0FBQTdDLE1BQXlETCxLQUEvRDtBQUNBLFFBQU1NLE1BQU0sR0FBR0MsUUFBUSxDQUFDUCxLQUFLLENBQUNNLE1BQVAsRUFBZSxFQUFmLENBQVIsSUFBOEIsQ0FBN0M7QUFDQSxRQUFNRSxLQUFLLEdBQUdELFFBQVEsQ0FBQ1AsS0FBSyxDQUFDUSxLQUFQLEVBQWMsRUFBZCxDQUFSLElBQTZCLEVBQTNDO0FBQ0EsUUFBTUMsbUJBQW1CLEdBQ3ZCVCxLQUFLLENBQUNTLG1CQUFOLElBQTZCRixRQUFRLENBQUNQLEtBQUssQ0FBQ1MsbUJBQVAsRUFBNEIsRUFBNUIsQ0FEdkM7QUFFQSxRQUFNQyxpQkFBaUIsR0FDckJWLEtBQUssQ0FBQ1UsaUJBQU4sSUFBMkJILFFBQVEsQ0FBQ1AsS0FBSyxDQUFDVSxpQkFBUCxFQUEwQixFQUExQixDQURyQyxDQU5pQyxDQVNqQzs7QUFDQSxRQUFNQyxRQUE0QixHQUFHLE1BQU1DLHNDQUFBLENBQ3hDLFVBQVNiLElBQUssMkJBRDBCLENBQTND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ZmlsZSI6Ii4vcGFnZXMvYXBpL2FydC1pbmRleC93b3Jrcy50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCAqIGFzIGQzQXJyYXkgZnJvbSAnZDMtYXJyYXknO1xuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuXG5pbXBvcnQge1xuICBBcnRJbmRleEFwaVF1ZXJ5LFxuICBBcnRJbmRleEFwaVdvcmtzUmVzdWx0LFxuICBBcnRJbmRleFdvcmtUeXBlLFxufSBmcm9tICcuLi8uLi8uLi90eXBlcy9hcnQtaW5kZXgtdHlwZXMnO1xuaW1wb3J0IGNyZWF0ZUZ1c2UgZnJvbSAnLi4vLi4vLi4vbGliL2NyZWF0ZS1mdXNlJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFdvcmtzUmVzdWx0KFxuICBob3N0OiBzdHJpbmcsXG4gIHF1ZXJ5OiBBcnRJbmRleEFwaVF1ZXJ5ID0ge30sXG4pOiBQcm9taXNlPEFydEluZGV4QXBpV29ya3NSZXN1bHQ+IHtcbiAgY29uc3QgeyBzZWFyY2gsIGZvcm1hdHMsIGFydGlzdElkcywgZXhoaWJpdGlvbklkcywgZ2VuZGVycyB9ID0gcXVlcnk7XG4gIGNvbnN0IG9mZnNldCA9IHBhcnNlSW50KHF1ZXJ5Lm9mZnNldCwgMTApIHx8IDA7XG4gIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQocXVlcnkubGltaXQsIDEwKSB8fCAyMDtcbiAgY29uc3QgZXhoaWJpdGlvblN0YXJ0WWVhciA9XG4gICAgcXVlcnkuZXhoaWJpdGlvblN0YXJ0WWVhciAmJiBwYXJzZUludChxdWVyeS5leGhpYml0aW9uU3RhcnRZZWFyLCAxMCk7XG4gIGNvbnN0IGV4aGliaXRpb25FbmRZZWFyID1cbiAgICBxdWVyeS5leGhpYml0aW9uRW5kWWVhciAmJiBwYXJzZUludChxdWVyeS5leGhpYml0aW9uRW5kWWVhciwgMTApO1xuXG4gIC8vIFRPRE86IFdvcmsgb3V0IGh0dHBzIG9yIGh0dHBcbiAgY29uc3QgYWxsV29ya3M6IEFydEluZGV4V29ya1R5cGVbXSA9IGF3YWl0IGQzLmNzdihcbiAgICBgaHR0cDovLyR7aG9zdH0vYXJ0LWluZGV4L2RhdGEvd29ya3MuY3N2YCxcbiAgKTtcblxuICAvLyBGaWx0ZXIgd29ya3NcbiAgbGV0IHdvcmtzID0gYWxsV29ya3MuZmlsdGVyKCh3b3JrKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWRGb3JtYXRzID0gZm9ybWF0cz8uc3BsaXQoJywnKTtcbiAgICBjb25zdCBzZWxlY3RlZEFydGlzdElkcyA9IGFydGlzdElkcz8uc3BsaXQoJywnKTtcbiAgICBjb25zdCBzZWxlY3RlZEV4aGliaXRpb25JZHMgPSBleGhpYml0aW9uSWRzPy5zcGxpdCgnLCcpO1xuICAgIGNvbnN0IHNlbGVjdGVkR2VuZGVycyA9IGdlbmRlcnM/LnNwbGl0KCcsJyk7XG5cbiAgICBjb25zdCBoYXNGb3JtYXRzID0gc2VsZWN0ZWRGb3JtYXRzXG4gICAgICA/IHNlbGVjdGVkRm9ybWF0cy5pbmNsdWRlcyh3b3JrLm1lZGl1bUZvcm1hdC50b0xvd2VyQ2FzZSgpKVxuICAgICAgOiB0cnVlO1xuXG4gICAgY29uc3QgaGFzQXJ0aXN0SWRzID0gc2VsZWN0ZWRBcnRpc3RJZHNcbiAgICAgID8gc2VsZWN0ZWRBcnRpc3RJZHMuaW5jbHVkZXMod29yay5hcnRpc3RJZClcbiAgICAgIDogdHJ1ZTtcblxuICAgIGNvbnN0IGhhc0V4aGliaXRpb25JZHMgPSBzZWxlY3RlZEV4aGliaXRpb25JZHNcbiAgICAgID8gc2VsZWN0ZWRFeGhpYml0aW9uSWRzLmluY2x1ZGVzKHdvcmsuZXhoaWJpdGlvbklkKVxuICAgICAgOiB0cnVlO1xuXG4gICAgY29uc3QgaXNBZnRlclN0YXJ0WWVhciA9IGV4aGliaXRpb25TdGFydFllYXJcbiAgICAgID8gcGFyc2VJbnQod29yay5leGhpYml0aW9uWWVhciwgMTApID49IGV4aGliaXRpb25TdGFydFllYXJcbiAgICAgIDogdHJ1ZTtcbiAgICBjb25zdCBpc0JlZm9yZUVuZFllYXIgPSBleGhpYml0aW9uRW5kWWVhclxuICAgICAgPyBwYXJzZUludCh3b3JrLmV4aGliaXRpb25ZZWFyLCAxMCkgPCBleGhpYml0aW9uRW5kWWVhclxuICAgICAgOiB0cnVlO1xuXG4gICAgY29uc3QgYXJ0aXN0R2VuZGVyID0gd29yay5hcnRpc3RHZW5kZXIgfHwgJ3Vua25vd24nO1xuICAgIGNvbnN0IGhhc0dlbmRlcnMgPSBzZWxlY3RlZEdlbmRlcnNcbiAgICAgID8gc2VsZWN0ZWRHZW5kZXJzLmluY2x1ZGVzKGFydGlzdEdlbmRlcilcbiAgICAgIDogdHJ1ZTtcblxuICAgIHJldHVybiAoXG4gICAgICBoYXNGb3JtYXRzICYmXG4gICAgICBoYXNBcnRpc3RJZHMgJiZcbiAgICAgIGhhc0V4aGliaXRpb25JZHMgJiZcbiAgICAgIGlzQWZ0ZXJTdGFydFllYXIgJiZcbiAgICAgIGlzQmVmb3JlRW5kWWVhciAmJlxuICAgICAgaGFzR2VuZGVyc1xuICAgICk7XG4gIH0pO1xuXG4gIC8vIFJ1biBzZWFyY2ggb3ZlciBmYWNldGVkIHdvcmtzXG4gIGlmIChzZWFyY2gpIHtcbiAgICBjb25zdCBqb2luZWRXb3JrcyA9IHdvcmtzLm1hcCgodykgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4udyxcbiAgICAgICAgc2VhcmNoS2V5OiBgJHt3LnRpdGxlfSAke3cuYXJ0aXN0Rmlyc3ROYW1lfSAke3cuYXJ0aXN0TGFzdE5hbWV9ICR7dy5leGhpYml0aW9uTmFtZX0gJHt3LmV4aGliaXRpb25QbGFjZX0gJHt3Lm1lZGl1bUZvcm1hdH0gJHt3LmNhdGFsb2d1ZU5hbWV9YCxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBmdXNlID0gY3JlYXRlRnVzZTxBcnRJbmRleFdvcmtUeXBlPihqb2luZWRXb3Jrcywge1xuICAgICAgaW5jbHVkZVNjb3JlOiBmYWxzZSxcbiAgICAgIHRocmVzaG9sZDogMC4yLFxuICAgICAgdXNlRXh0ZW5kZWRTZWFyY2g6IHRydWUsXG4gICAgICBkaXN0YW5jZTogMTAwMCxcbiAgICAgIGtleXM6IFsnc2VhcmNoS2V5J10sXG4gICAgICAvLyBrZXlzOiBbXG4gICAgICAvLyAgICd0aXRsZScsXG4gICAgICAvLyAgICdhcnRpc3RGaXJzdE5hbWUnLFxuICAgICAgLy8gICAnYXJ0aXN0TGFzdE5hbWUnLFxuICAgICAgLy8gICAnZXhoaWJpdGlvbk5hbWUnLFxuICAgICAgLy8gICAnZXhoaWJpdGlvblBsYWNlJyxcbiAgICAgIC8vICAgJ21lZGl1bUZvcm1hdCcsXG4gICAgICAvLyAgICdjYXRhbG9ndWVOYW1lJyxcbiAgICAgIC8vIF0sXG4gICAgfSk7XG5cbiAgICBjb25zdCBzZWFyY2hXb3JrcyA9IGF3YWl0IGZ1c2Uuc2VhcmNoKHNlYXJjaCk7XG4gICAgd29ya3MgPSBzZWFyY2hXb3Jrcy5tYXAoKHJlc3VsdCkgPT4gcmVzdWx0Lml0ZW0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB3b3Jrc1RvdGFsOiB3b3Jrcy5sZW5ndGgsXG4gICAgd29ya3M6IHdvcmtzLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbGltaXQpLFxuICAgIGZhY2V0czoge1xuICAgICAgYXJ0aXN0czogcm9sbHVwKHdvcmtzLCAnYXJ0aXN0SWQnKVxuICAgICAgICAubWFwKChbaWQsIHRvdGFsXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHdvcmsgPSB3b3Jrcy5maW5kKCh3KSA9PiB3LmFydGlzdElkID09PSBpZCk7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAvLyB2YWx1ZTogYCR7d29yay5hcnRpc3RGaXJzdE5hbWV9ICR7d29yay5hcnRpc3RMYXN0TmFtZX1gLFxuICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgZmlyc3ROYW1lOiB3b3JrLmFydGlzdEZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgbGFzdE5hbWU6IHdvcmsuYXJ0aXN0TGFzdE5hbWUsXG4gICAgICAgICAgICAgIHRodW1ibmFpbEZpbGU6IHdvcmsuYXJ0aXN0VGh1bWJuYWlsRmlsZSxcbiAgICAgICAgICAgICAgZ2VuZGVyOiB3b3JrLmFydGlzdEdlbmRlcixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b3RhbCxcbiAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYi50b3RhbCAtIGEudG90YWwpXG4gICAgICAgIC8vIEVuc3VyZSB3ZSBkb24ndCBnZXQgYWxsIGFydGlzdHMhXG4gICAgICAgIC5zbGljZSgwLCAxMDApLFxuICAgICAgZXhoaWJpdGlvbnM6IHJvbGx1cCh3b3JrcywgJ2V4aGliaXRpb25JZCcpXG4gICAgICAgIC5tYXAoKFtpZCwgdG90YWxdKSA9PiB7XG4gICAgICAgICAgY29uc3Qgd29yayA9IHdvcmtzLmZpbmQoKHcpID0+IHcuZXhoaWJpdGlvbklkID09PSBpZCk7XG5cbiAgICAgICAgICByZXR1cm4geyBpZCwgdmFsdWU6IHdvcmsuZXhoaWJpdGlvbk5hbWUsIHRvdGFsIH07XG4gICAgICAgIH0pXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnRvdGFsIC0gYS50b3RhbCksXG4gICAgICBmb3JtYXRzOiByb2xsdXAod29ya3MsICdtZWRpdW1Gb3JtYXQnKVxuICAgICAgICAubWFwKChbdmFsdWUsIHRvdGFsXSkgPT4ge1xuICAgICAgICAgIC8vIFRPRE86IENvbnNpZGVyIGNvbnZlcnRpbmcgdG8gdW5kZXJzY29yZVxuICAgICAgICAgIHJldHVybiB7IHR5cGU6IHZhbHVlLnRvTG93ZXJDYXNlKCksIHZhbHVlLCB0b3RhbCB9O1xuICAgICAgICB9KVxuICAgICAgICAuc2xpY2UoMCwgMTAwKSxcbiAgICAgIGdlbmRlcnM6IHJvbGx1cCh3b3JrcywgJ2FydGlzdEdlbmRlcicpXG4gICAgICAgIC5tYXAoKFt0eXBlLCB0b3RhbF0pID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdUeXBlID0gdHlwZSB8fCAndW5rbm93bic7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogbmV3VHlwZSwgdmFsdWU6IGNhcGl0YWxpc2UobmV3VHlwZSksIHRvdGFsIH07XG4gICAgICAgIH0pXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnRvdGFsIC0gYS50b3RhbCksXG4gICAgICB5ZWFyczogcm9sbHVwKHdvcmtzLCAnZXhoaWJpdGlvblllYXInKVxuICAgICAgICAubWFwKChbaWQsIHRvdGFsXSkgPT4ge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIHZhbHVlOiBpZC50b1N0cmluZygpLFxuICAgICAgICAgICAgdG90YWwsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSlcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIudG90YWwgLSBhLnRvdGFsKSxcbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiByb2xsdXAoZGF0YTogQXJ0SW5kZXhXb3JrVHlwZVtdLCBrZXk6IGtleW9mIEFydEluZGV4V29ya1R5cGUpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oXG4gICAgZDNBcnJheS5yb2xsdXAoXG4gICAgICBkYXRhLFxuICAgICAgKHYpID0+IHYubGVuZ3RoLFxuICAgICAgKGQpID0+IGRba2V5XSxcbiAgICApLFxuICApO1xufVxuXG5jb25zdCBjYXBpdGFsaXNlID0gKHMpID0+IHtcbiAgaWYgKHR5cGVvZiBzICE9PSAnc3RyaW5nJykgcmV0dXJuICcnO1xuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSk7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGNvbnN0IHsgaGVhZGVycywgcXVlcnkgfSA9IHJlcTtcbiAgY29uc3QgeyBob3N0IH0gPSBoZWFkZXJzO1xuXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFdvcmtzUmVzdWx0KGhvc3QsIHF1ZXJ5KTtcblxuICByZXMuc3RhdHVzQ29kZSA9IDIwMDtcbiAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgcmVzLmVuZChKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/api/art-index/works.ts\n");

/***/ }),

/***/ "d3":
/*!*********************!*\
  !*** external "d3" ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"d3\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJkM1wiPzQzNjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiZDMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJkM1wiKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///d3\n");

/***/ }),

/***/ "d3-array":
/*!***************************!*\
  !*** external "d3-array" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"d3-array\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJkMy1hcnJheVwiP2U2Y2UiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiZDMtYXJyYXkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJkMy1hcnJheVwiKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///d3-array\n");

/***/ }),

/***/ "fuse.js":
/*!**************************!*\
  !*** external "fuse.js" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"fuse.js\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJmdXNlLmpzXCI/YTg4MiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiJmdXNlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZnVzZS5qc1wiKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///fuse.js\n");

/***/ })

/******/ });